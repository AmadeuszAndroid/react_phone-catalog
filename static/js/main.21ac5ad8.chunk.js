(this["webpackJsonpreact_phone-catalog"]=this["webpackJsonpreact_phone-catalog"]||[]).push([[0],{30:function(e,t,c){},33:function(e,t,c){"use strict";c.r(t);var a,s=c(7),r=c(25),n=c.n(r),i=c(1),o=c(3);c(30);!function(e){e.left="left",e.right="right",e.top="up"}(a||(a={}));var l=c(6),u=c.n(l),d=c(0),j=function(e){var t=e.direction,c=e.buttonExtraClass,a=e.onClick,s=e.disabled,r=e.dataCy,n="img/arrows/arrow-".concat(t).concat(s?"-disabled":"",".svg"),i="Arrow ".concat(t),o=u()("arrow",{"arrow--disabled":s},c);return Object(d.jsx)("button",{className:o,type:"button",onClick:a,disabled:s,"data-cy":r,children:Object(d.jsx)("img",{className:"arrow__img",src:n,alt:i})})};j.defaultProps={buttonExtraClass:"",disabled:!1,dataCy:""};var b=function(e){var t=e.imageClasses;return Object(d.jsx)("img",{src:"img/logo.svg",alt:"Logo",className:t})},m=function(e){var t=e.hasTopNav,c=void 0===t||t,s=function(){return window.scrollTo(0,0)};return Object(d.jsxs)("footer",{className:"home__footer footer",children:[Object(d.jsxs)("div",{className:"footer__left",children:[Object(d.jsx)(b,{imageClasses:"footer__logo logo"}),Object(d.jsxs)("div",{className:"footer__links",children:[Object(d.jsx)("a",{className:"footer__link",href:"https://github.com/AmadeuszAndroid/react_phone-catalog/tree/develop",children:"Github"}),Object(d.jsx)("a",{className:"footer__link",href:"#/",children:"Contacts"}),Object(d.jsx)("a",{className:"footer__link",href:"#/",children:"rights"})]})]}),c&&Object(d.jsxs)("nav",{className:"footer__top-nav",children:[Object(d.jsx)("button",{className:"footer__top-link-text",type:"button",onClick:s,children:"Back to top"}),Object(d.jsx)(j,{direction:a.top,onClick:s})]})]})};m.defaultProps={hasTopNav:!0};var h="/phones",O="/tablets",p="/accessories",x="/favorites",_="/cart",v="/product",g=function(e){var t=e.count;return Object(d.jsx)("div",{className:"image-link__counter counter",children:Object(d.jsx)("span",{className:"counter__text",children:t})})},f=function(e){var t=e.link,c=e.imageSource,a=e.alternativeName,r=e.itemsCount;return Object(d.jsxs)(s.c,{className:"image-link",to:t,children:[Object(d.jsx)("img",{className:"image-link__icon",src:c,alt:a}),-1!==r&&Object(d.jsx)(g,{count:r})]})},N=function(e){var t=e.count,c=void 0===t?-1:t;return Object(d.jsx)(f,{alternativeName:"Cart",imageSource:"img/header/cart.svg",link:_,itemsCount:c})};N.defaultProps={count:-1};var y,C=function(e){var t=e.count,c=void 0===t?-1:t;return Object(d.jsx)(f,{alternativeName:"Favourites",imageSource:"img/header/favourites.svg",link:x,itemsCount:c})};C.defaultProps={count:-1},function(e){e.phone="phone",e.tablet="tablet",e.accessories="accessory",e.all="all"}(y||(y={}));var k=function(e){var t=e.activeCategory,c=u()("nav__link",{active:t===y.phone}),a=u()("nav__link",{active:t===y.tablet}),r=u()("nav__link",{active:t===y.accessories});return Object(d.jsxs)("nav",{className:"nav",children:[Object(d.jsx)(s.c,{className:"nav__link",to:"/",children:"home"}),Object(d.jsx)(s.c,{className:c,to:h,children:"phones"}),Object(d.jsx)(s.c,{className:a,to:O,children:"tablets"}),Object(d.jsx)(s.c,{className:r,to:p,children:"accessories"})]})};k.defaultProps={activeCategory:-1};var w=c(4),P="query",S="page",F=function(e){var t,c=e.currentPage,a=Object(s.d)(),r=Object(w.a)(a,2),n=r[0],o=r[1],l=Object(i.useRef)(null),u=n.get(P),j="Search in ".concat(c,"..."),b=function(){n.delete(P),o(n)};return Object(i.useEffect)((function(){var e=l.current;null!==e&&(e.value=u||"")}),[u]),Object(d.jsxs)("div",{className:"search",children:[n.get(P)?Object(d.jsx)("button",{onClick:b,type:"button",className:"search__close",children:Object(d.jsx)("img",{src:"img/header/search/close.svg",alt:"Clear search"})}):Object(d.jsx)("label",{className:"search__label",htmlFor:"search",children:Object(d.jsx)("img",{src:"img/header/search/search.svg",alt:"Search"})}),Object(d.jsx)("input",{id:"search",className:"search__input",type:"text",placeholder:j,onChange:function(e){var c=e.target.value;clearTimeout(t),t=+setTimeout((function(){c?(n.set(P,c),null!==n.get(S)&&n.set(S,"1"),o(n)):b()}),1e3)},ref:l})]})},T=function(e){var t=e.hasSearch,c=e.currentPage,a=void 0===c?"":c,s=e.favoritesCount,r=e.cartCount,n=e.hasNav,i=e.hasFavorites,o=e.activeCategory;return Object(d.jsxs)("header",{id:"header",className:"header",children:[Object(d.jsxs)("div",{className:"header__part header__part--left",children:[Object(d.jsx)(b,{imageClasses:"header__logo logo"}),n&&Object(d.jsx)(k,{activeCategory:o})]}),Object(d.jsxs)("div",{className:"header__part",children:[t&&Object(d.jsx)(F,{currentPage:a}),i&&Object(d.jsx)(C,{count:s}),Object(d.jsx)(N,{count:r})]})]})};T.defaultProps={favoritesCount:-1,cartCount:-1,currentPage:"",hasNav:!0,hasFavorites:!0,activeCategory:y.all};var A=function(e){var t=e.children,c=e.extraClassName,a=u()("title",c);return Object(d.jsx)("h1",{className:a,children:t})};A.defaultProps={extraClassName:""};var E=function(e){var t=e.name,c=e.imagePath,a=e.productsCount,s="".concat(a," models");return Object(d.jsxs)("div",{className:"category",children:[Object(d.jsx)("img",{className:"category__image",src:c,alt:t}),Object(d.jsx)("h3",{className:"category__name",children:t}),Object(d.jsx)("p",{className:"category__count",children:s})]})},q=c(15),I="https://mate-academy.github.io/react_phone-catalog/api/products.json";function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.all;return fetch(I).then((function(e){return e.json()})).then((function(t){var c=t.map((function(e){var t=e.price,c=t*e.discount/100;return Object(q.a)(Object(q.a)({},e),{},{discountedPrice:+(t-c).toFixed(2)})}));return e===y.all?c:c.filter((function(t){return t.type===e}))}))}var M,L=function(){var e=Object(i.useState)([]),t=Object(w.a)(e,2),c=t[0],a=t[1];function r(e){return c.filter((function(t){return t.type===e})).length}var n=r(y.phone),o=r(y.tablet),l=r(y.accessories);return Object(i.useEffect)((function(){B().then(a)}),[]),Object(d.jsxs)("div",{className:"home__categories shop-by-category",children:[Object(d.jsx)(A,{children:"Shop by category"}),Object(d.jsxs)("div",{"data-cy":"categoryLinksContainer",className:"shop-by-category__categories",children:[Object(d.jsx)(s.b,{className:"shop-by-category__link",to:"phones",children:Object(d.jsx)(E,{imagePath:"img/home/categories/mobile-phones.png",name:"Mobile phones",productsCount:n})}),Object(d.jsx)(s.b,{className:"shop-by-category__link",to:"tablets",children:Object(d.jsx)(E,{imagePath:"img/home/categories/tablets.png",name:"Tablets",productsCount:o})}),Object(d.jsx)(s.b,{className:"shop-by-category__link",to:"accessories",children:Object(d.jsx)(E,{imagePath:"img/home/categories/accessories.png",name:"Accessories",productsCount:l})})]})]})};!function(e){e[e.phones=0]="phones",e[e.tablets=1]="tablets",e[e.accessories=2]="accessories"}(M||(M={}));var R=function(){var e,t=Object(i.useState)(0),c=Object(w.a)(t,2),s=c[0],r=c[1];switch(s){case M.tablets:e="tablets";break;case M.accessories:e="accessories";break;case M.phones:default:e="phones"}var n="img/home/slider/banner-".concat(e,".png"),o=u()("categories-slider__bar",{"categories-slider__bar--visible":0===s}),l=u()("categories-slider__bar",{"categories-slider__bar--visible":1===s}),b=u()("categories-slider__bar",{"categories-slider__bar--visible":2===s}),m=function(){var e;e=s===M.accessories?M.phones:s+1,r(e)};return Object(i.useEffect)((function(){var e=setInterval((function(){return m()}),5e3);return function(){return clearInterval(e)}}),[s]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"home__categories-slider categories-slider",children:[Object(d.jsx)(j,{direction:a.left,buttonExtraClass:"categories-slider__nav",onClick:function(){var e;e=s===M.phones?M.accessories:s-1,r(e)}}),Object(d.jsx)("img",{className:"categories-slider__image",src:n,alt:"Banner"}),Object(d.jsx)(j,{direction:a.right,buttonExtraClass:"categories-slider__nav",onClick:m})]}),Object(d.jsxs)("div",{className:"categories-slider__bars",children:[Object(d.jsx)("div",{className:o}),Object(d.jsx)("div",{className:l}),Object(d.jsx)("div",{className:b})]})]})},D=function(e){var t=e.name,c=e.value;return Object(d.jsxs)("div",{className:"product-card-details",children:[Object(d.jsx)("div",{className:"product-card-details__name",children:t}),Object(d.jsx)("div",{className:"product-card-details__value",children:c})]})},Q=function(e){var t=e.children,c="$".concat(t);return Object(d.jsx)("h2",{className:"old-price",children:c})},$=c(10);function J(e){var t=function(){var t=localStorage.getItem(e);return"string"===typeof t?JSON.parse(t):[]},c=Object(i.useState)(t),a=Object(w.a)(c,2),s=a[0],r=a[1];return[t,function(t){r(t),localStorage.setItem(e,JSON.stringify(t))},function(e){return s.some((function(t){return"id"in t?t.id===e:t.product.id===e}))},s.length]}var U="cart",z=Object(i.createContext)({increment:function(){},decrement:function(){}}),G=function(e){var t=e.product,c=J(U),a=Object(w.a)(c,3),s=a[0],r=a[1],n=a[2],o=J("favorites"),l=Object(w.a)(o,3),j=l[0],b=l[1],m=l[2],h=Object(i.useContext)(z),O=h.increment,p=h.decrement,x=t.id,_=n(x),v=u()("product-buttons__cart",{"product-buttons__cart--clicked":_}),g=u()("product-buttons__cart-text",{"product-buttons__cart-text--clicked":_}),f=_?"Added to cart":"Add to cart",N=m(x)?"img/favorites/heart-selected.svg":"img/favorites/heart.svg";return Object(d.jsxs)("div",{className:"product-buttons",children:[Object(d.jsx)("button",{className:v,type:"button",onClick:function(){if(!n(x)){var e={product:t,quantity:1};r([].concat(Object($.a)(s()),[e]))}},children:Object(d.jsx)("div",{className:g,children:f})}),Object(d.jsx)("button",{className:"product-buttons__favorites",type:"button",onClick:function(){m(x)?(b(Object($.a)(j().filter((function(e){return"id"in e?e.id!==x:e.product.id!==x})))),p()):(b([].concat(Object($.a)(j()),[t])),O())},"data-cy":"addToFavorite",children:Object(d.jsx)("img",{className:"product-buttons__heart",src:N,alt:"Add to favorites"})})]})};function H(e){return"".concat(e.split("MB")[0]," ","MB")}var W,Y=function(e){var t=e.product,c=t.imageUrl,a=t.name,r=t.price,n=t.discountedPrice,i=t.screen,o=t.capacity,l=t.ram,u=t.id,j="$".concat(n),b=i.replace(" inches","\u201d"),m=H(o),h=H(l),O="".concat(v,"/").concat(u);return Object(d.jsxs)("li",{className:"product-card",children:[Object(d.jsxs)(s.b,{className:"product-card__link",to:O,children:[Object(d.jsx)("img",{className:"product-card__image",src:c,alt:"Product"}),Object(d.jsx)("p",{className:"product-card__name",children:a}),Object(d.jsxs)("div",{className:"product-card__prices",children:[Object(d.jsx)("h2",{className:"product-card__current-price",children:j}),n<r&&Object(d.jsx)(Q,{children:r})]}),Object(d.jsxs)("div",{className:"product-card__details",children:[i&&Object(d.jsx)(D,{name:"Screen",value:b}),o&&Object(d.jsx)(D,{name:"Capacity",value:m}),l&&Object(d.jsx)(D,{name:"Ram",value:h})]})]}),Object(d.jsx)("div",{className:"product-card__buttons",children:Object(d.jsx)(G,{product:t})})]})},K=function(e){var t=e.products;return Object(d.jsx)("ul",{"data-cy":"cardsContainer",className:"products-slider__cards",children:t.map((function(e){return Object(d.jsx)(Y,{product:e},e.id)}))})};!function(e){e[e.hotProducts=0]="hotProducts",e[e.newProducts=1]="newProducts"}(W||(W={}));var V,X=function(e){var t=e.title,c=e.type,s=Object(i.useState)([]),r=Object(w.a)(s,2),n=r[0],o=r[1],l=Object(i.useState)(0),u=Object(w.a)(l,2),b=u[0],m=u[1],h=n.slice(b,4+b),O=0===b,p=b+4===n.length;function x(e){return e.price*e.discount/100}return Object(i.useEffect)((function(){B().then((function(e){var t;switch(c){case W.newProducts:t=e.filter((function(e){return 0===e.discount})).sort((function(e,t){return e.age-t.age}));break;case W.hotProducts:default:t=e.filter((function(e){return e.discount>0})).sort((function(e,t){return x(t)-x(e)}))}o(t)}))}),[]),Object(d.jsxs)("div",{className:"home__products-slider products-slider",children:[Object(d.jsxs)("div",{className:"products-slider__header",children:[Object(d.jsx)(A,{children:t}),Object(d.jsxs)("div",{className:"cardsContainer__arrows",children:[Object(d.jsx)(j,{direction:a.left,onClick:function(){b>0&&m(b-1)},disabled:O}),Object(d.jsx)(j,{direction:a.right,onClick:function(){b+4<n.length&&m(b+1)},disabled:p})]})]}),Object(d.jsx)(K,{products:h})]})},Z=function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(T,{hasSearch:!1,currentPage:"home"}),Object(d.jsxs)("main",{className:"home",children:[Object(d.jsx)(R,{}),Object(d.jsx)(X,{title:"Hot prices",type:W.hotProducts}),Object(d.jsx)(L,{}),Object(d.jsx)(X,{title:"Brand new models",type:W.newProducts})]}),Object(d.jsx)(m,{})]})};!function(e){e.features="dropdown-features",e.pages="dropdown-pages"}(V||(V={}));var ee="query",te="page",ce="perPage",ae="sort",se=function(e){var t=e.path;return Object(d.jsxs)("div",{"data-cy":"breadCrumbs",className:"products__breadcrumbs breadcrumbs",children:[Object(d.jsx)(s.b,{to:"/",children:Object(d.jsx)("img",{className:"breadcrumbs__image",src:"img/home-breadcrumbs.svg",alt:"home"})}),t.map((function(e,c){var a=e.link,r=e.text;return Object(d.jsxs)(i.Fragment,{children:[Object(d.jsx)("img",{className:"breadcrumbs__image",src:"img/arrows/arrow-right-breadcrumbs.svg",alt:"Arrow right"}),c===t.length-1?Object(d.jsx)("p",{className:"breadcrumbs__text",children:r}):Object(d.jsx)(s.b,{to:a||"",children:Object(d.jsx)("span",{className:"breadcrumbs__text",children:r})})]},a+r)}))]})},re=function(){return Object(d.jsx)(A,{children:"No search products found"})},ne=function(e){var t=e.countText,c=e.extraClasses,a=u()("products-count",c);return Object(d.jsx)("p",{className:a,children:t})},ie=function(e){var t=e.products;return Object(d.jsx)("ul",{className:"products__list products-list","data-cy":"productList",children:t.map((function(e){return Object(d.jsx)(Y,{product:e},e.id)}))})},oe=function(e){var t,c=e.id,a=e.description,r=e.options,n=Object(i.useState)(!1),o=Object(w.a)(n,2),l=o[0],j=o[1],b=Object(s.d)(),m=Object(w.a)(b,2),h=m[0],O=m[1],p=u()("dropdown__select",{"dropdown__select--big":c===V.features,"dropdown__select--small":c===V.pages}),x=u()("dropdown__arrow-icon",{"dropdown__arrow-icon--big":c===V.features,"dropdown__arrow-icon--small":c===V.pages}),_=u()("dropdown__list",{"dropdown__list--big":c===V.features,"dropdown__list--small":c===V.pages}),v="img/arrows/arrow-".concat(l?"up":"down","-dropdown.svg"),g=c===V.features?ae:ce,f=h.get(g),N=null===(t=r.find((function(e){return e.value===f})))||void 0===t?void 0:t.text;return Object(i.useEffect)((function(){null===h.get(g)&&(h.set(g,r[0].value),O(h))})),Object(d.jsxs)("div",{className:"dropdown",children:[Object(d.jsx)("p",{className:"dropdown__title",children:a}),Object(d.jsxs)("button",{className:p,type:"button",onClick:function(){j(!l)},onBlur:function(){return j(!1)},children:[Object(d.jsx)("div",{className:"dropdown__select-content",children:Object(d.jsx)("p",{className:"dropdown__select-text",children:N})}),Object(d.jsx)("img",{className:x,src:v,alt:"Dropdown arrow"})]}),l&&Object(d.jsx)("div",{className:_,children:r.map((function(e){var t=e.text,a=e.value;return Object(d.jsx)("button",{className:"dropdown__option",value:a,type:"button",onMouseDown:function(){return function(e){j(!1);var t=c===V.features?ae:ce;h.set(t,e),t===ce&&("all"!==e?h.set(te,"1"):h.delete(te)),O(h)}(a)},children:t},t)}))})]})},le=function(){return Object(d.jsx)("div",{className:"loader",children:Object(d.jsx)("div",{className:"loader__content"})})},ue=function(e){var t=e.categoryName,c="".concat(t," not found");return Object(d.jsx)(A,{children:c})},de=function(e){var t=e.pageNumber,c=e.isSelected,a=e.onClick,s=u()("page",{page__active:c});return Object(d.jsx)("button",{type:"button",className:s,onClick:function(){return a(t)},disabled:c,children:t})},je=function(e){for(var t=e.total,c=e.perPage,s=e.currentPage,r=void 0===s?1:s,n=e.onPageChange,i=[1],o=2;o<=Math.ceil(t/c);o+=1)i.push(o);return Object(d.jsxs)("div",{className:"products__pagination pagination","data-cy":"pagination",children:[Object(d.jsx)(j,{direction:a.left,onClick:function(){return n(r-1)},disabled:1===r,dataCy:"paginationLeft"}),Object(d.jsx)("ul",{className:"pagination__pages",children:i.map((function(e){return Object(d.jsx)("li",{children:Object(d.jsx)(de,{pageNumber:e,isSelected:e===r,onClick:n})},Date.now()+e)}))}),Object(d.jsx)(j,{direction:a.right,onClick:function(){return n(r+1)},disabled:r===i.length,dataCy:"paginationRight"})]})};je.defaultProps={currentPage:1};var be=function(e){var t,c,a,r,n,o,l=e.categoryType,j=Object(i.useState)(null),b=Object(w.a)(j,2),h=b[0],O=b[1],p=Object(i.useState)(0),x=Object(w.a)(p,2),_=x[0],v=x[1],g=Object(i.useState)(0),f=Object(w.a)(g,2),N=f[0],C=f[1],k=Object(s.d)(),P=Object(w.a)(k,2),S=P[0],F=P[1],E=null===(t=S.get(ee))||void 0===t?void 0:t.toLowerCase(),q=S.get(ae),I=S.get(ce),M=+(S.get(te)||1),L=(null===h||void 0===h?void 0:h.length)||0;switch(l){case y.tablet:c="tablets",a="Tablets",r=B(y.tablet),n="Tablets";break;case y.accessories:c="accesories",a="Accessories",r=B(y.accessories),n="Accessories";break;default:case y.phone:c="phones",a="Phones",r=B(y.phone),n="Mobile phones"}var R=["age","name","price"],D=["all","4","8","16"],Q=_>=+D[1],J=[{text:"Newest",value:R[0]},{text:"Alphabetically",value:R[1]},{text:"Cheapest",value:R[2]}],U=u()("products__count",{"products__count--query":E}),z=D.map((function(e){return{text:e,value:e}}));o=I===D[0]?L:+(I||L);var G,H=[{text:a}];G=E?"".concat(_," result").concat(1===_?"":"s"):"".concat(_," model").concat(1===_?"":"s");var W=I!==D[0]&&_>=o&&Q,Y=null===S.get(te)||Number.isInteger(M)&&M>0&&M<=Math.ceil(_/o),K=!_&&E||q&&!R.includes(q)||I&&!D.includes(I)||!Y;return Object(i.useEffect)((function(){r.then((function(e){C(e.length);var t=Object($.a)(e);if(E&&(t=e.filter((function(e){return e.name.toLowerCase().includes(E)}))),v(t.length),t.sort((function(e,t){switch(q){case"price":return e.price-t.price;default:case"name":return e.name.localeCompare(t.name);case"age":return e.age-t.age}})),I&&I!==D[0]){var c=(M-1)*o,a=M*o-1;O(t.filter((function(e,t){return t>=c&&t<=a})))}else O(t)}))}),[E,q,M,I]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(T,{hasSearch:!0,currentPage:c}),null===h?Object(d.jsx)(le,{}):Object(d.jsxs)("main",{className:"products",children:[!E&&Object(d.jsx)(se,{path:H}),K||!N?Object(d.jsx)("div",{className:"products__no-results",children:N?Object(d.jsx)(re,{}):Object(d.jsx)(ue,{categoryName:n})}):Object(d.jsxs)(d.Fragment,{children:[!E&&Object(d.jsx)(A,{extraClassName:"products__title",children:n}),Object(d.jsx)(ne,{countText:G,extraClasses:U}),Q&&Object(d.jsxs)("div",{className:"products__filters",children:[Object(d.jsx)(oe,{id:V.features,description:"Sort by",options:J}),Object(d.jsx)(oe,{id:V.pages,description:"Items on page",options:z})]}),L&&Object(d.jsx)(ie,{products:h}),W&&Object(d.jsx)(je,{onPageChange:function(e){S.set(te,e.toString()),F(S)},perPage:o,currentPage:M,total:_})]})]}),Object(d.jsx)(m,{})]})},me=function(){return Object(d.jsx)(be,{categoryType:y.phone})},he=function(){return Object(d.jsx)(be,{categoryType:y.tablet})},Oe=function(){return Object(d.jsx)(be,{categoryType:y.accessories})},pe=function(){var e,t=J("favorites"),c=Object(w.a)(t,1)[0],a=Object(s.d)(),r=null===(e=Object(w.a)(a,1)[0].get(ee))||void 0===e?void 0:e.toLowerCase(),n=Object(i.useState)(c()),o=Object(w.a)(n,2),l=o[0],j=o[1],b=Object(i.useState)(l.length),h=Object(w.a)(b,2),O=h[0],p=h[1],x=r?"result":"item",_="".concat(O," ").concat(x).concat(1===O?"":"s"),v=u()("favorites__count",{"favorites__count--query":r});return Object(i.useEffect)((function(){var e;e=r?c().filter((function(e){return e.name.toLowerCase().includes(r)})):c(),j(e),p(e.length)}),[r,O]),Object(d.jsxs)(z.Provider,{value:{increment:function(){return p((function(e){return e+1}))},decrement:function(){return p((function(e){return e-1}))}},children:[Object(d.jsx)(T,{hasSearch:!0,currentPage:"favourites",favoritesCount:O}),Object(d.jsx)("main",{className:"favorites",children:O?Object(d.jsxs)(d.Fragment,{children:[!r&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(se,{path:[{text:"Favourites"}]}),Object(d.jsx)(A,{extraClassName:"favorites__title",children:"Favourites"})]}),Object(d.jsx)(ne,{countText:_,extraClasses:v}),Object(d.jsx)(ie,{products:l})]}):Object(d.jsx)("div",{className:"favorites__no-search",children:r?Object(d.jsx)(re,{}):Object(d.jsx)(ue,{categoryName:"Favorites"})})}),Object(d.jsx)(m,{})]})},xe=function(e){var t=e.extraClass,c=u()("back",t),a=Object(o.o)();return Object(d.jsxs)("button",{className:c,type:"button",onClick:function(){return a(-1)},"data-cy":"backButton",children:[Object(d.jsx)("img",{className:"back__image",src:"img/arrows/arrow-left.svg",alt:"Arrow left"}),Object(d.jsx)("p",{className:"back__text",children:"Back"})]})},_e=function(e){var t=e.productInCart,c=t.product,a=t.quantity,s=e.onRemoveClick,r=e.onQuantityClick,n=c.imageUrl,i=c.name,o=c.discountedPrice,l=c.id,u="$".concat(+(o*a).toFixed(2)),j="img/cart/minus-".concat(1===a?"disabled":"enabled",".svg");return Object(d.jsxs)("li",{className:"cart-item",children:[Object(d.jsx)("button",{type:"button",className:"cart-item__remove-button","data-cy":"cartDeleteButton",onClick:function(){return s(l)},children:Object(d.jsx)("img",{className:"cart-item__remove-icon",src:"img/cart/close.svg",alt:"Delete item"})}),Object(d.jsx)("img",{className:"cart-item__product-image",src:n,alt:"Product"}),Object(d.jsx)("p",{className:"cart-item__product-name",children:i}),Object(d.jsx)("button",{className:"cart-item__minus",type:"button",disabled:1===a,onClick:function(){return r(l,!0)},children:Object(d.jsx)("img",{className:"cart-item__minut-icon",src:j,alt:"Minus"})}),Object(d.jsx)("div",{"data-cy":"productQauntity",className:"cart-item__quantity",children:a}),Object(d.jsx)("button",{className:"cart-item__plus",type:"button",onClick:function(){return r(l,!1)},children:Object(d.jsx)("img",{className:"cart-item__plus-icon",src:"img/cart/plus.svg",alt:"Plus"})}),Object(d.jsx)("span",{className:"cart-item__total-price",children:u})]})},ve=function(e){var t=e.productsInCart,c=e.onRemoveClick,a=e.onQuantityClick;return Object(d.jsx)("ul",{className:"cart-items",children:t.map((function(e){var t=e.product.id;return Object(d.jsx)(_e,{productInCart:e,onRemoveClick:c,onQuantityClick:a},t)}))})},ge=function(){var e=J(U),t=Object(w.a)(e,4),c=t[0],a=t[1],s=t[3],r=Object(i.useState)(!1),n=Object(w.a)(r,2),o=n[0],l=n[1],u=c(),j=u.reduce((function(e,t){var c=t.quantity;return e+t.product.discountedPrice*c}),0),b="$".concat(+j.toFixed(2)),h=u.reduce((function(e,t){return e+t.quantity}),0),O="Total for ".concat(h," item").concat(1===h?"":"s"),p=0===s;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(T,{hasSearch:!1,hasNav:!1,hasFavorites:!1,cartCount:h}),Object(d.jsxs)("main",{className:"cart",children:[Object(d.jsx)(xe,{extraClass:"cart__back"}),p?Object(d.jsx)(A,{children:"Your cart is empty"}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(A,{extraClassName:"cart__title",children:"Cart"}),Object(d.jsxs)("div",{className:"cart__content",children:[Object(d.jsx)("div",{className:"cart__items",children:Object(d.jsx)(ve,{productsInCart:u,onRemoveClick:function(e){a(u.filter((function(t){return t.product.id!==e})))},onQuantityClick:function(e,t){a(u.map((function(c){var a=Object(q.a)({},c),s=c.product,r=c.quantity;return s.id===e&&(t?r>1&&(a.quantity-=1):a.quantity+=1),Object(q.a)({},a)})))}})}),Object(d.jsxs)("div",{className:"cart__summary-wrapper",children:[Object(d.jsxs)("div",{className:"cart__summary",children:[Object(d.jsx)(A,{extraClassName:"cart__total-price",children:b}),Object(d.jsx)("p",{className:"cart__count-text",children:O}),Object(d.jsx)("button",{type:"button",className:"cart__checkout-button",onClick:function(){l(!0)},children:Object(d.jsx)("div",{className:"cart__checkout-button-text",children:"Checkout"})})]}),o&&Object(d.jsx)("p",{children:"We are sorry, but this feature is not implemented yet"})]})]})]})]}),Object(d.jsx)(m,{hasTopNav:!1})]})},fe=function(e){var t=e.imageSource,c=e.isSelected,a=u()("small-photo",{"small-photo--selected":c});return Object(d.jsx)("button",{type:"button",className:a,children:Object(d.jsx)("img",{className:"small-photo__picture",src:t,alt:"Small product"})})},Ne=function(){var e,t,c=Object(i.useState)(null),a=Object(w.a)(c,2),s=a[0],r=a[1],n=Object(i.useState)(null),l=Object(w.a)(n,2),u=l[0],j=l[1],b=Object(i.useState)(0),m=Object(w.a)(b,1)[0],x=Object(o.q)().productId,_=(null===s||void 0===s?void 0:s.type)||y.all,v="$".concat(null===s||void 0===s?void 0:s.discountedPrice);switch(_){case y.phone:e="Phones",t=h;break;case y.tablet:e="Tablets",t=O;break;case y.accessories:e="Accessories",t=p;break;default:e="",t=""}var g=[{text:e,link:t},{text:(null===s||void 0===s?void 0:s.name)||""}];return Object(i.useEffect)((function(){B().then((function(e){r(e.find((function(e){return e.id===x}))||null)})),function(e){if(!e)throw new Error("Product not found");var t="https://mate-academy.github.io/react_phone-catalog/api/products/".concat(e,".json");return fetch(t).then((function(e){return e.json()}))}(x).then(j)}),[]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(T,{hasSearch:!1,activeCategory:_}),Object(d.jsx)("main",{className:"product-details",children:null!==s&&null!==u?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(se,{path:g}),Object(d.jsx)(xe,{extraClass:"product-details__back"}),Object(d.jsx)(A,{extraClassName:"product-details__title",children:s.name}),Object(d.jsxs)("section",{className:"product-details__content-up",children:[Object(d.jsx)("ul",{className:"product-details__small-photos",children:u.images.map((function(e,t){var c=t===m;return Object(d.jsx)("li",{children:Object(d.jsx)(fe,{isSelected:c,imageSource:e})},e)}))}),Object(d.jsx)("img",{className:"product-details__big-photo",src:u.images[m],alt:"Selected"}),Object(d.jsxs)("div",{className:"product-details__up-details",children:[Object(d.jsxs)("div",{className:"product-details__prices",children:[Object(d.jsx)(A,{children:v}),!!s.discount&&Object(d.jsx)(Q,{children:s.price})]}),Object(d.jsx)(G,{product:s})]})]})]}):Object(d.jsx)(le,{})})]})},ye=function(){var e="".concat(v,"/:productId");return Object(d.jsx)("div",{className:"App",children:Object(d.jsxs)(o.c,{children:[Object(d.jsx)(o.a,{path:"/",element:Object(d.jsx)(Z,{})}),Object(d.jsx)(o.a,{path:h,element:Object(d.jsx)(me,{})}),Object(d.jsx)(o.a,{path:O,element:Object(d.jsx)(he,{})}),Object(d.jsx)(o.a,{path:p,element:Object(d.jsx)(Oe,{})}),Object(d.jsx)(o.a,{path:x,element:Object(d.jsx)(pe,{})}),Object(d.jsx)(o.a,{path:_,element:Object(d.jsx)(ge,{})}),Object(d.jsx)(o.a,{path:e,element:Object(d.jsx)(Ne,{})})]})})};n.a.render(Object(d.jsx)(s.a,{children:Object(d.jsx)(i.StrictMode,{children:Object(d.jsx)(ye,{})})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.21ac5ad8.chunk.js.map