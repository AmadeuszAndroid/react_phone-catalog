(this["webpackJsonpreact_phone-catalog"]=this["webpackJsonpreact_phone-catalog"]||[]).push([[0],{30:function(e,t,c){},33:function(e,t,c){"use strict";c.r(t);var a,s=c(7),r=c(25),n=c.n(r),o=c(1),i=c(3);c(30);function l(e){return""===e?"":"".concat(e.split("MB")[0]," ","MB")}function u(e){return""===e?"":e.replace(" inches","\u201d")}function d(){return window.innerWidth>1030}!function(e){e.left="left",e.right="right",e.top="up"}(a||(a={}));var j=c(5),b=c.n(j),m=c(0),h=function(e){var t=e.direction,c=e.buttonExtraClass,a=e.onClick,s=e.disabled,r=e.dataCy,n="img/arrows/arrow-".concat(t).concat(s?"-disabled":"",".svg"),o="Arrow ".concat(t),i=b()("arrow",{"arrow--disabled":s},c);return Object(m.jsx)("button",{className:i,type:"button",onClick:a,disabled:s,"data-cy":r,children:Object(m.jsx)("img",{className:"arrow__img",src:n,alt:o})})};h.defaultProps={buttonExtraClass:"",disabled:!1,dataCy:""};var p=function(e){var t=e.vertical,c=b()("bottom-navigation",{"bottom-navigation__vertical":t});return Object(m.jsxs)("div",{className:c,children:[Object(m.jsx)("a",{className:"bottom-navigation__link",href:"https://github.com/AmadeuszAndroid/react_phone-catalog/tree/develop",children:"Github"}),Object(m.jsx)("a",{className:"bottom-navigation__link",href:"#/",children:"Contacts"}),Object(m.jsx)("a",{className:"bottom-navigation__link",href:"#/",children:"rights"})]})};p.defaultProps={vertical:!1};var O=function(e){var t=e.imageExtraClass,c=b()("logo",t);return Object(m.jsx)("img",{src:"img/logo.svg",alt:"Logo",className:c})};O.defaultProps={imageExtraClass:""};var x=function(e){var t=e.hasTopNav,c=void 0===t||t,s=function(){return window.scrollTo(1440,0)};return Object(m.jsxs)("footer",{className:"home__footer footer",children:[Object(m.jsxs)("div",{className:"footer__left",children:[Object(m.jsx)(O,{imageExtraClass:"footer__logo logo"}),d()&&Object(m.jsx)(p,{})]}),c&&Object(m.jsxs)("nav",{className:"footer__top-nav",children:[Object(m.jsx)("button",{className:"footer__top-link-text",type:"button",onClick:s,children:"Back to top"}),Object(m.jsx)(h,{direction:a.top,onClick:s})]})]})};x.defaultProps={hasTopNav:!0};var v="/phones",f="/tablets",_="/accessories",g="/favorites",N="/cart",y="/product",C=function(e){var t=e.count;return Object(m.jsx)("div",{className:"image-link__counter counter",children:Object(m.jsx)("span",{className:"counter__text",children:t})})},w=function(e){var t=e.link,c=e.imageSource,a=e.alternativeName,r=e.itemsCount;return Object(m.jsxs)(s.c,{className:"image-link",to:t,children:[Object(m.jsx)("img",{className:"image-link__icon",src:c,alt:a}),-1!==r&&Object(m.jsx)(C,{count:r})]})},k=function(e){var t=e.count,c=void 0===t?-1:t;return Object(m.jsx)(w,{alternativeName:"Cart",imageSource:"img/header/cart.svg",link:N,itemsCount:c})};k.defaultProps={count:-1};var P,S=function(e){var t=e.count,c=void 0===t?-1:t;return Object(m.jsx)(w,{alternativeName:"Favourites",imageSource:"img/header/favourites.svg",link:g,itemsCount:c})};S.defaultProps={count:-1},function(e){e.phone="phone",e.tablet="tablet",e.accessories="accessory",e.all="all"}(P||(P={}));var E=function(e){var t=e.activeCategory,c=e.vertical,a=b()("nav",{nav__verical:c}),r=b()("nav__link",{active:t===P.phone}),n=b()("nav__link",{active:t===P.tablet}),o=b()("nav__link",{active:t===P.accessories});return Object(m.jsxs)("nav",{className:a,children:[Object(m.jsx)(s.c,{className:"nav__link",to:"/",children:"home"}),Object(m.jsx)(s.c,{className:r,to:v,children:"phones"}),Object(m.jsx)(s.c,{className:n,to:f,children:"tablets"}),Object(m.jsx)(s.c,{className:o,to:_,children:"accessories"})]})};E.defaultProps={activeCategory:-1,vertical:!1};var F=c(4),T="query",B="page",A=function(e){var t,c=e.currentPage,a=Object(s.d)(),r=Object(F.a)(a,2),n=r[0],i=r[1],l=Object(o.useRef)(null),u=n.get(T),d="Search in ".concat(c,"..."),j=function(){n.delete(T),i(n)};return Object(o.useEffect)((function(){var e=l.current;null!==e&&(e.value=u||"")}),[u]),Object(m.jsxs)("div",{className:"search",children:[n.get(T)?Object(m.jsx)("button",{onClick:j,type:"button",className:"search__close","data-cy":"searchDelete",children:Object(m.jsx)("img",{src:"img/header/search/close.svg",alt:"Clear search"})}):Object(m.jsx)("label",{className:"search__label",htmlFor:"search",children:Object(m.jsx)("img",{src:"img/header/search/search.svg",alt:"Search"})}),Object(m.jsx)("input",{id:"search",className:"search__input",type:"text",placeholder:d,onChange:function(e){var c=e.target.value;clearTimeout(t),t=+setTimeout((function(){c?(n.set(T,c),null!==n.get(B)&&n.set(B,"1"),i(n)):j()}),1e3)},ref:l})]})},I=function(e){var t=e.hasSearch,c=e.currentPage,a=void 0===c?"":c,s=e.favoritesCount,r=e.cartCount,n=e.hasNav,o=e.hasFavorites,i=e.activeCategory;return Object(m.jsxs)("header",{id:"header",className:"header",children:[Object(m.jsx)("div",{className:"header__part header__part--left",children:d()?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(O,{imageExtraClass:"header__logo logo"}),n&&Object(m.jsx)(E,{activeCategory:i})]}):Object(m.jsx)("img",{className:"header__dropdown-menu",src:"img/menu.svg",alt:"menu"})}),Object(m.jsxs)("div",{className:"header__part",children:[t&&Object(m.jsx)(A,{currentPage:a}),d()&&o&&Object(m.jsx)(S,{count:s}),d()&&Object(m.jsx)(k,{count:r})]})]})};I.defaultProps={favoritesCount:-1,cartCount:-1,currentPage:"",hasNav:!0,hasFavorites:!0,activeCategory:P.all};var R=function(e){var t=e.children,c=e.extraClassName,a=b()("title",c);return Object(m.jsx)("h1",{className:a,children:t})};R.defaultProps={extraClassName:""};var q=function(e){var t=e.name,c=e.imagePath,a=e.productsCount,s="".concat(a," models");return Object(m.jsxs)("div",{className:"category",children:[Object(m.jsx)("img",{className:"category__image",src:c,alt:t}),Object(m.jsx)("h3",{className:"category__name",children:t}),Object(m.jsx)("p",{className:"category__count",children:s})]})},M=c(15),D="https://mate-academy.github.io/react_phone-catalog/api/products.json",L=0;function Q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P.all;return fetch(D).then((function(e){return e.json()})).then((function(t){L=0;var c=t.map((function(e){var t=e.price,c=t*e.discount/100;return Object(M.a)(Object(M.a)({},e),{},{discountedPrice:+(t-c).toFixed(2)})}));return e===P.all?c:c.filter((function(t){return t.type===e}))})).catch((function(){return L<20?(L+=1,Q(e)):(L=0,[])}))}function $(e){return e.price*e.discount/100}var J,z=function(){var e=Object(o.useState)([]),t=Object(F.a)(e,2),c=t[0],a=t[1];function r(e){return c.filter((function(t){return t.type===e})).length}var n=r(P.phone),i=r(P.tablet),l=r(P.accessories);return Object(o.useEffect)((function(){Q().then(a)}),[]),Object(m.jsxs)("div",{className:"home__categories shop-by-category",children:[Object(m.jsx)(R,{children:"Shop by category"}),Object(m.jsxs)("div",{"data-cy":"categoryLinksContainer",className:"shop-by-category__categories",children:[Object(m.jsx)(s.b,{className:"shop-by-category__link",to:"phones",children:Object(m.jsx)(q,{imagePath:"img/home/categories/mobile-phones.png",name:"Mobile phones",productsCount:n})}),Object(m.jsx)(s.b,{className:"shop-by-category__link",to:"tablets",children:Object(m.jsx)(q,{imagePath:"img/home/categories/tablets.png",name:"Tablets",productsCount:i})}),Object(m.jsx)(s.b,{className:"shop-by-category__link",to:"accessories",children:Object(m.jsx)(q,{imagePath:"img/home/categories/accessories.png",name:"Accessories",productsCount:l})})]})]})},U=function(e){var t=e.src,c=e.alt;return Object(m.jsx)("li",{className:"category-slider-image",children:Object(m.jsx)("img",{className:"category-slider-image__banner",src:t,alt:c})})};!function(e){e[e.phones=0]="phones",e[e.tablets=1]="tablets",e[e.accessories=2]="accessories"}(J||(J={}));var G=function(){var e=Object(o.useState)(0),t=Object(F.a)(e,2),c=t[0],s=t[1],r=["phones","tablets","accessories"].map((function(e){return{src:"img/home/slider/banner-".concat(e,".png"),alt:e}})),n=c===J.tablets,i=c===J.accessories,l=b()("categories-slider__images",{"categories-slider__images--1":n,"categories-slider__images--2":i}),u=b()("categories-slider__bar",{"categories-slider__bar--visible":0===c}),d=b()("categories-slider__bar",{"categories-slider__bar--visible":1===c}),j=b()("categories-slider__bar",{"categories-slider__bar--visible":2===c}),p=function(){var e;e=c===J.accessories?J.phones:c+1,s(e)};return Object(o.useEffect)((function(){var e=setInterval((function(){return p()}),5e3);return function(){return clearInterval(e)}}),[c]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"home__categories-slider categories-slider",children:[Object(m.jsx)(h,{direction:a.left,buttonExtraClass:"categories-slider__nav",onClick:function(){var e;e=c===J.phones?J.accessories:c-1,s(e)}}),Object(m.jsx)("div",{className:"categories-slider__content",children:Object(m.jsx)("ul",{className:l,children:r.map((function(e){var t=e.src,c=e.alt;return Object(m.jsx)(U,{alt:c,src:t},c)}))})}),Object(m.jsx)(h,{direction:a.right,buttonExtraClass:"categories-slider__nav",onClick:p})]}),Object(m.jsxs)("div",{className:"categories-slider__bars",children:[Object(m.jsx)("div",{className:u}),Object(m.jsx)("div",{className:d}),Object(m.jsx)("div",{className:j})]})]})},W=function(e){var t=e.children,c="$".concat(t);return Object(m.jsx)("h2",{className:"old-price",children:c})},Y=c(10);function H(e){var t=function(){var t=localStorage.getItem(e);return"string"===typeof t?JSON.parse(t):[]},c=Object(o.useState)(t),a=Object(F.a)(c,2),s=a[0],r=a[1];return[t,function(t){r(t),localStorage.setItem(e,JSON.stringify(t))},function(e){return s.some((function(t){return"id"in t?t.id===e:t.product.id===e}))},s.length]}var K="cart",V=Object(o.createContext)({increment:function(){},decrement:function(){}}),X=function(e){var t=e.children,c=e.buttonClasses,a=e.textClasses,s=e.onClick;return Object(m.jsx)("button",{className:c,type:"button",onClick:s,children:Object(m.jsx)("div",{className:a,children:t})})},Z=function(e){var t=e.product,c=e.areBig,a=H(K),s=Object(F.a)(a,3),r=s[0],n=s[1],i=s[2],l=H("favorites"),u=Object(F.a)(l,3),d=u[0],j=u[1],h=u[2],p=Object(o.useContext)(V),O=p.increment,x=p.decrement,v=t.id,f=i(v),_=b()("button",{"button--clicked":f,"button--big":c}),g=b()("button__text",{"button__text--clicked":f}),N=f?"Added to cart":"Add to cart",y=b()("product-buttons__favorites",{"product-buttons__favorites--big":c}),C=h(v)?"img/favorites/heart-selected.svg":"img/favorites/heart.svg";return Object(m.jsxs)("div",{className:"product-buttons",children:[Object(m.jsx)(X,{buttonClasses:_,onClick:function(){if(!i(v)){var e={product:t,quantity:1};n([].concat(Object(Y.a)(r()),[e]))}},textClasses:g,children:N}),Object(m.jsx)("button",{className:y,type:"button",onClick:function(){h(v)?(j(Object(Y.a)(d().filter((function(e){return"id"in e?e.id!==v:e.product.id!==v})))),x()):(j([].concat(Object(Y.a)(d()),[t])),O())},"data-cy":"addToFavorite",children:Object(m.jsx)("img",{className:"product-buttons__heart",src:C,alt:"Add to favorites"})})]})};Z.defaultProps={areBig:!1};var ee=function(e){var t=e.name,c=e.value,a=e.isBig,s=b()("product-spec__name",{"product-spec__name--big":a}),r=b()("product-spec__value",{"product-spec__value--big":a,"product-spec__value--small":!a});return Object(m.jsxs)("div",{className:"product-spec",children:[Object(m.jsx)("div",{className:s,children:t}),Object(m.jsx)("div",{className:r,children:c})]})};ee.defaultProps={isBig:!1};var te,ce=function(e){var t=e.specs,c=e.isBig,a=e.listClasses;return Object(m.jsx)("ul",{className:a,children:t.map((function(e){var t=e.name,a=e.value;if(a)return Object(m.jsx)(ee,{name:t,value:a,isBig:c},t)}))})},ae=function(e){var t=e.product,c=t.imageUrl,a=t.name,r=t.price,n=t.discountedPrice,o=t.screen,i=t.capacity,d=t.ram,j=t.id,b="$".concat(n),h=u(o),p=l(i),O=l(d),x="".concat(y,"/").concat(j),v=[{name:"Screen",value:h},{name:"Capacity",value:p},{name:"Ram",value:O}];return Object(m.jsxs)("li",{className:"product-card",children:[Object(m.jsxs)(s.b,{className:"product-card__link",to:x,children:[Object(m.jsx)("img",{className:"product-card__image",src:c,alt:"Product"}),Object(m.jsx)("p",{className:"product-card__name",children:a}),Object(m.jsxs)("div",{className:"product-card__prices",children:[Object(m.jsx)("h2",{className:"product-card__current-price",children:b}),n<r&&Object(m.jsx)(W,{children:r})]}),Object(m.jsx)(ce,{isBig:!1,listClasses:"product-card__details",specs:v})]}),Object(m.jsx)("div",{className:"product-card__buttons",children:Object(m.jsx)(Z,{product:t})})]})},se=function(e){var t=e.products;return Object(m.jsx)("ul",{"data-cy":"cardsContainer",className:"products-slider__cards",children:t.map((function(e){return Object(m.jsx)(ae,{product:e},e.id)}))})};!function(e){e[e.hotProducts=0]="hotProducts",e[e.newProducts=1]="newProducts",e[e.random=2]="random"}(te||(te={}));var re=function(e){var t=e.type,c=e.children,s=e.withoutId,r=void 0===s?"":s,n=Object(o.useState)([]),i=Object(F.a)(n,2),l=i[0],u=i[1],d=Object(o.useState)(0),j=Object(F.a)(d,2),p=j[0],O=j[1],x=l.slice(p,4+p),v=0===p,f=p+4===l.length,_=b()("products-slider",{"home__products-slider--down":t===te.newProducts,"home__products-slider--up":t===te.hotProducts,"product-details__slider":t===te.random});return Object(o.useEffect)((function(){switch(t){case te.newProducts:return void Q().then((function(e){return e.filter((function(e){return 0===e.discount})).sort((function(e,t){return t.price-e.price}))})).then(u);case te.random:return void function(e){return Q().then((function(t){for(var c=t.filter((function(t){return t.id!==e})),a=[],s=function(){var e=Math.floor(Math.random()*c.length),t=c[e];a.push(t),c=c.filter((function(e){return e.id!==t.id}))};c.length;)s();return a}))}(r).then(u);case te.hotProducts:default:Q().then((function(e){return e.filter((function(e){return e.discount>0})).sort((function(e,t){return $(t)-$(e)}))})).then(u)}}),[r]),Object(m.jsxs)("div",{className:_,children:[Object(m.jsxs)("div",{className:"products-slider__header",children:[Object(m.jsx)(R,{children:c}),Object(m.jsxs)("div",{className:"cardsContainer__arrows",children:[Object(m.jsx)(h,{direction:a.left,onClick:function(){p>0&&O(p-1)},disabled:v}),Object(m.jsx)(h,{direction:a.right,onClick:function(){p+4<l.length&&O(p+1)},disabled:f})]})]}),Object(m.jsx)(se,{products:x})]})};re.defaultProps={withoutId:""};var ne,oe=function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(I,{hasSearch:!1,currentPage:"home"}),Object(m.jsxs)("main",{className:"home",children:[Object(m.jsx)(G,{}),Object(m.jsx)(re,{type:te.hotProducts,children:"Hot prices"}),Object(m.jsx)(z,{}),Object(m.jsx)(re,{type:te.newProducts,children:"Brand new models"})]}),Object(m.jsx)(x,{})]})};!function(e){e.features="dropdown-features",e.pages="dropdown-pages"}(ne||(ne={}));var ie="query",le="page",ue="perPage",de="sort",je=function(e){var t=e.path;return Object(m.jsxs)("div",{"data-cy":"breadCrumbs",className:"products__breadcrumbs breadcrumbs",children:[Object(m.jsx)(s.b,{to:"/",children:Object(m.jsx)("img",{className:"breadcrumbs__home",src:"img/home-breadcrumbs.svg",alt:"home"})}),t.map((function(e,c){var a=e.link,r=e.text;return Object(m.jsxs)(o.Fragment,{children:[Object(m.jsx)("img",{className:"breadcrumbs__image",src:"img/arrows/arrow-right-breadcrumbs.svg",alt:"Arrow right"}),c===t.length-1?Object(m.jsx)("p",{className:"breadcrumbs__text",children:r}):Object(m.jsx)(s.b,{to:a||"",children:Object(m.jsx)("span",{className:"breadcrumbs__text breadcrumbs__link",children:r})})]},a+r)}))]})},be=function(){return Object(m.jsx)(R,{children:"No search products found"})},me=function(e){var t=e.countText,c=e.extraClasses,a=b()("products-count",c);return Object(m.jsx)("p",{className:a,children:t})},he=function(e){var t=e.products;return Object(m.jsx)("ul",{className:"products__list products-list","data-cy":"productList",children:t.map((function(e){return Object(m.jsx)(ae,{product:e},e.id)}))})},pe=function(e){var t,c=e.id,a=e.description,r=e.options,n=Object(o.useState)(!1),i=Object(F.a)(n,2),l=i[0],u=i[1],d=Object(o.useState)(-1),j=Object(F.a)(d,2),h=j[0],p=j[1],O=Object(o.useState)(!1),x=Object(F.a)(O,2),v=x[0],f=x[1],_=Object(o.useState)(!1),g=Object(F.a)(_,2),N=g[0],y=g[1],C=Object(s.d)(),w=Object(F.a)(C,2),k=w[0],P=w[1],S=Object(o.useRef)(null),E=Object(o.useRef)(null),T=Object(o.useRef)(null),B=Object(o.useRef)(null),A=b()("dropdown__select",{"dropdown__select--big":c===ne.features,"dropdown__select--small":c===ne.pages}),I=b()("dropdown__arrow-icon",{"dropdown__arrow-icon--big":c===ne.features,"dropdown__arrow-icon--small":c===ne.pages}),R=b()("dropdown__list",{"dropdown__list--big":c===ne.features,"dropdown__list--small":c===ne.pages}),q="img/arrows/arrow-".concat(l?"up":"down","-dropdown.svg"),M=c===ne.features?de:ue,D=k.get(M),L=null===(t=r.find((function(e){return e.value===D})))||void 0===t?void 0:t.text,Q=function(){v||u(!l)},$=function(e){u(!1);var t=c===ne.features?de:ue;k.set(t,e),t===ue&&("all"===e?k.delete(le):k.set(le,"1")),P(k)},J=function(){N||(f(!0),u(!1),p(-1),window.setTimeout((function(){return f(!1)}),500))};null===k.get(M)&&(k.set(M,r[0].value),P(k));var z=function(e){y(!0);var t=e.key,a="ArrowUp"===t,s="ArrowDown"===t,n="Enter"===t,o="Escape"===t,i=c===ne.pages;if(l&&(a||s||n||o)){switch(e.preventDefault(),h){case 0:var u;if(s)null===(u=E.current)||void 0===u||u.focus(),p((function(e){return e+1}));break;case 1:var d;if(a)null===(d=S.current)||void 0===d||d.focus(),p((function(e){return e-1}));else if(s){var j;null===(j=T.current)||void 0===j||j.focus(),p((function(e){return e+1}))}break;case 2:var b;if(a)null===(b=E.current)||void 0===b||b.focus(),p((function(e){return e-1}));else if(s&&i){var m;null===(m=B.current)||void 0===m||m.focus(),p((function(e){return e+1}))}break;case 3:var O;if(a&&i)null===(O=T.current)||void 0===O||O.focus(),p((function(e){return e-1}))}n&&$(r[h].value),o&&Q()}y(!1)};return Object(o.useEffect)((function(){var e;l&&(p(0),null!==S&&(null===(e=S.current)||void 0===e||e.focus()))}),[l]),Object(o.useEffect)((function(){return window.addEventListener("keydown",z),function(){window.removeEventListener("keydown",z)}}),[l,h]),Object(m.jsxs)("div",{className:"dropdown",children:[Object(m.jsx)("p",{className:"dropdown__title",children:a}),Object(m.jsxs)("button",{className:A,type:"button",onClick:Q,children:[Object(m.jsx)("div",{className:"dropdown__select-content",children:Object(m.jsx)("p",{className:"dropdown__select-text",children:L})}),Object(m.jsx)("img",{className:I,src:q,alt:"Dropdown arrow"})]}),l&&Object(m.jsx)("div",{className:R,children:r.map((function(e,t){var c,a=e.text,s=e.value;switch(t){case 1:c=E;break;case 2:c=T;break;case 3:c=B;break;default:c=S}return Object(m.jsx)("button",{className:"dropdown__option",value:s,type:"button",onMouseDown:function(){return $(s)},ref:c,onBlur:J,children:a},a)}))})]})},Oe=function(){return Object(m.jsx)("div",{className:"loader",children:Object(m.jsx)("div",{className:"loader__content"})})},xe=function(e){var t=e.categoryName,c="".concat(t," not found");return Object(m.jsx)(R,{children:c})},ve=function(e){var t=e.pageNumber,c=e.isSelected,a=e.onClick,s=b()("page",{page__active:c});return Object(m.jsx)("button",{type:"button",className:s,onClick:function(){return a(t)},disabled:c,children:t})},fe=function(e){for(var t=e.total,c=e.perPage,s=e.currentPage,r=void 0===s?1:s,n=e.onPageChange,o=[1],i=2;i<=Math.ceil(t/c);i+=1)o.push(i);return Object(m.jsxs)("div",{className:"products__pagination pagination","data-cy":"pagination",children:[Object(m.jsx)(h,{direction:a.left,onClick:function(){return n(r-1)},disabled:1===r,dataCy:"paginationLeft"}),Object(m.jsx)("ul",{className:"pagination__pages",children:o.map((function(e){return Object(m.jsx)("li",{children:Object(m.jsx)(ve,{pageNumber:e,isSelected:e===r,onClick:n})},Date.now()+e)}))}),Object(m.jsx)(h,{direction:a.right,onClick:function(){return n(r+1)},disabled:r===o.length,dataCy:"paginationRight"})]})};fe.defaultProps={currentPage:1};var _e=function(e){var t,c,a,r,n,i,l=e.categoryType,u=Object(o.useState)(null),d=Object(F.a)(u,2),j=d[0],h=d[1],p=Object(o.useState)(0),O=Object(F.a)(p,2),v=O[0],f=O[1],_=Object(o.useState)(-1),g=Object(F.a)(_,2),N=g[0],y=g[1],C=Object(o.useState)(!1),w=Object(F.a)(C,2),k=w[0],S=w[1],E=Object(s.d)(),T=Object(F.a)(E,2),B=T[0],A=T[1],q=null===(t=B.get(ie))||void 0===t?void 0:t.toLowerCase(),M=B.get(de),D=B.get(ue),L=+(B.get(le)||1),$=(null===j||void 0===j?void 0:j.length)||0;switch(l){case P.tablet:c="tablets",a="Tablets",r=Q(P.tablet),n="Tablets";break;case P.accessories:c="accesories",a="Accessories",r=Q(P.accessories),n="Accessories";break;default:case P.phone:c="phones",a="Phones",r=Q(P.phone),n="Mobile phones"}var J=["age","name","price"],z=["all","4","8","16"],U=v>=+z[1],G=[{text:"Newest",value:J[0]},{text:"Alphabetically",value:J[1]},{text:"Cheapest",value:J[2]}],W=b()("products__count",{"products__count--query":q}),H=z.map((function(e){return{text:e,value:e}}));i=D===z[0]?$:+(D||$);var K,V=[{text:a}];K=q?"".concat(v," result").concat(1===v?"":"s"):"".concat(v," model").concat(1===v?"":"s");var X=D!==z[0]&&v>=i&&U,Z=null===B.get(le)||Number.isInteger(L)&&L>0&&L<=Math.ceil(v/i),ee=!v&&q||M&&!J.includes(M)||D&&!z.includes(D)||!Z;return Object(o.useEffect)((function(){k||(null===B.get(ue)&&B.set(ue,z[0]),null===B.get(de)&&B.set(de,J[0]),A(B,{replace:!0}),S(!0))}),[]),Object(o.useEffect)((function(){null!==B.get("sort")&&null!==B.get("perPage")&&r.then((function(e){y(e.length);var t=Object(Y.a)(e);if(q&&(t=e.filter((function(e){return e.name.toLowerCase().includes(q)}))),f(t.length),t.sort((function(e,t){switch(M){case"price":return e.price-t.price;default:case"name":return e.name.localeCompare(t.name);case"age":return e.age-t.age}})),D&&D!==z[0]){var c=(L-1)*i,a=L*i-1;h(t.filter((function(e,t){return t>=c&&t<=a})))}else h(t)}))}),[q,M,L,D]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(I,{hasSearch:!0,currentPage:c}),null===j?Object(m.jsx)(Oe,{}):Object(m.jsxs)("main",{className:"products",children:[!q&&Object(m.jsx)(je,{path:V}),ee||!N?Object(m.jsx)("div",{className:"products__no-results",children:N?Object(m.jsx)(be,{}):Object(m.jsx)(xe,{categoryName:n})}):Object(m.jsxs)(m.Fragment,{children:[!q&&Object(m.jsx)(R,{extraClassName:"products__title",children:n}),Object(m.jsx)(me,{countText:K,extraClasses:W}),U&&Object(m.jsxs)("div",{className:"products__filters",children:[Object(m.jsx)(pe,{id:ne.features,description:"Sort by",options:G}),Object(m.jsx)(pe,{id:ne.pages,description:"Items on page",options:H})]}),$&&Object(m.jsx)(he,{products:j}),X&&Object(m.jsx)(fe,{onPageChange:function(e){B.set(le,e.toString()),A(B)},perPage:i,currentPage:L,total:v})]})]}),Object(m.jsx)(x,{})]})},ge=function(){return Object(m.jsx)(_e,{categoryType:P.phone})},Ne=function(){return Object(m.jsx)(_e,{categoryType:P.tablet})},ye=function(){return Object(m.jsx)(_e,{categoryType:P.accessories})},Ce=function(){var e,t=H("favorites"),c=Object(F.a)(t,1)[0],a=Object(s.d)(),r=null===(e=Object(F.a)(a,1)[0].get(ie))||void 0===e?void 0:e.toLowerCase(),n=Object(o.useState)(c()),i=Object(F.a)(n,2),l=i[0],u=i[1],d=Object(o.useState)(l.length),j=Object(F.a)(d,2),h=j[0],p=j[1],O=r?"result":"item",v="".concat(h," ").concat(O).concat(1===h?"":"s"),f=b()("favorites__count",{"favorites__count--query":r});return Object(o.useEffect)((function(){var e;e=r?c().filter((function(e){return e.name.toLowerCase().includes(r)})):c(),u(e),p(e.length)}),[r,h]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(V.Provider,{value:{increment:function(){return p((function(e){return e+1}))},decrement:function(){return p((function(e){return e-1}))}},children:[Object(m.jsx)(I,{hasSearch:!0,currentPage:"favourites",favoritesCount:h}),Object(m.jsx)("main",{className:"favorites",children:h?Object(m.jsxs)(m.Fragment,{children:[!r&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(je,{path:[{text:"Favourites"}]}),Object(m.jsx)(R,{extraClassName:"favorites__title",children:"Favourites"})]}),Object(m.jsx)(me,{countText:v,extraClasses:f}),Object(m.jsx)(he,{products:l})]}):Object(m.jsx)("div",{className:"favorites__no-search",children:r?Object(m.jsx)(be,{}):Object(m.jsx)(xe,{categoryName:"Favorites"})})})]}),Object(m.jsx)(x,{})]})},we=function(e){var t=e.extraClass,c=b()("back",t),a=Object(i.o)();return Object(m.jsxs)("button",{className:c,type:"button",onClick:function(){return a(-1)},"data-cy":"backButton",children:[Object(m.jsx)("img",{className:"back__image",src:"img/arrows/arrow-left.svg",alt:"Arrow left"}),Object(m.jsx)("p",{className:"back__text",children:"Back"})]})},ke=function(e){var t=e.productInCart,c=t.product,a=t.quantity,s=e.onRemoveClick,r=e.onQuantityClick,n=c.imageUrl,o=c.name,i=c.discountedPrice,l=c.id,u="$".concat(+(i*a).toFixed(2));return Object(m.jsxs)("li",{className:"cart-item",children:[Object(m.jsx)("button",{type:"button",className:"cart-item__remove-button","data-cy":"cartDeleteButton",onClick:function(){return s(l)},children:Object(m.jsx)("img",{className:"cart-item__remove-icon",src:"img/cart/close.svg",alt:"Delete item"})}),Object(m.jsx)("img",{className:"cart-item__product-image",src:n,alt:"Product"}),Object(m.jsx)("p",{className:"cart-item__product-name",children:o}),Object(m.jsx)("button",{className:"cart-item__minus",type:"button",disabled:1===a,onClick:function(){return r(l,!0)},children:"-"}),Object(m.jsx)("div",{"data-cy":"productQauntity",className:"cart-item__quantity",children:a}),Object(m.jsx)("button",{className:"cart-item__plus",type:"button",onClick:function(){return r(l,!1)},children:"+"}),Object(m.jsx)("span",{className:"cart-item__total-price",children:u})]})},Pe=function(e){var t=e.productsInCart,c=e.onRemoveClick,a=e.onQuantityClick;return Object(m.jsx)("ul",{className:"cart-items",children:t.map((function(e){var t=e.product.id;return Object(m.jsx)(ke,{productInCart:e,onRemoveClick:c,onQuantityClick:a},t)}))})},Se=function(){var e=H(K),t=Object(F.a)(e,4),c=t[0],a=t[1],s=t[3],r=Object(o.useState)(!1),n=Object(F.a)(r,2),i=n[0],l=n[1],u=c(),d=b()("button","button--big",{"button--clicked":i}),j=b()("button__text",{"button__text--clicked":i}),h=u.reduce((function(e,t){var c=t.quantity;return e+t.product.discountedPrice*c}),0),p="$".concat(+h.toFixed(2)),O=u.reduce((function(e,t){return e+t.quantity}),0),v="Total for ".concat(O," item").concat(1===O?"":"s"),f=0===s;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(I,{hasSearch:!1,hasNav:!1,hasFavorites:!1,cartCount:O}),Object(m.jsxs)("main",{className:"cart",children:[Object(m.jsx)(we,{extraClass:"cart__back"}),f?Object(m.jsx)(R,{extraClassName:"cart__title",children:"Your cart is empty"}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(R,{extraClassName:"cart__title",children:"Cart"}),Object(m.jsxs)("div",{className:"cart__content",children:[Object(m.jsx)("div",{className:"cart__items",children:Object(m.jsx)(Pe,{productsInCart:u,onRemoveClick:function(e){a(u.filter((function(t){return t.product.id!==e})))},onQuantityClick:function(e,t){a(u.map((function(c){var a=Object(M.a)({},c),s=c.product,r=c.quantity;return s.id===e&&(t?r>1&&(a.quantity-=1):a.quantity+=1),Object(M.a)({},a)})))}})}),Object(m.jsxs)("div",{className:"cart__summary-wrapper",children:[Object(m.jsxs)("div",{className:"cart__summary",children:[Object(m.jsx)(R,{extraClassName:"cart__total-price",children:p}),Object(m.jsx)("p",{className:"cart__count-text",children:v}),Object(m.jsx)(X,{buttonClasses:d,onClick:function(){l(!0)},textClasses:j,children:"Checkout"})]}),i&&Object(m.jsx)("p",{children:"We are sorry, but this feature is not implemented yet"})]})]})]})]}),Object(m.jsx)(x,{hasTopNav:!1})]})},Ee=function(e){var t=e.imageSource,c=e.isSelected,a=e.index,s=e.onClick,r=b()("small-photo",{"small-photo--selected":c});return Object(m.jsx)("button",{type:"button",className:r,onClick:function(){return s(a)},children:Object(m.jsx)("img",{className:"small-photo__picture",src:t,alt:"Small product"})})},Fe=function(e){var t=e.children;return Object(m.jsx)("h2",{className:"subtitle",children:t})},Te=function(){var e,t,c=Object(o.useState)(!1),a=Object(F.a)(c,2),s=a[0],r=a[1],n=Object(o.useState)(null),d=Object(F.a)(n,2),j=d[0],h=d[1],p=Object(o.useState)(null),O=Object(F.a)(p,2),g=O[0],N=O[1],y=Object(o.useState)(0),C=Object(F.a)(y,2),w=C[0],k=C[1],S=Object(i.q)().productId,E=(null===j||void 0===j?void 0:j.type)||P.all,T=[{name:"Screen",value:u((null===j||void 0===j?void 0:j.screen)||"")},{name:"Resolution",value:(null===g||void 0===g?void 0:g.display.screenResolution)||""},{name:"Processor",value:(null===g||void 0===g?void 0:g.hardware.cpu)||""},{name:"RAM",value:l((null===j||void 0===j?void 0:j.ram)||"")}],B=[].concat(T,[{name:"Built in memory",value:l((null===g||void 0===g?void 0:g.storage.flash)||"")},{name:"Camera",value:(null===g||void 0===g?void 0:g.camera.primary)||""},{name:"Cell",value:(null===g||void 0===g?void 0:g.connectivity.cell)||""}]),A="$".concat(null===j||void 0===j?void 0:j.discountedPrice);switch(E){case P.phone:e="Phones",t=v;break;case P.tablet:e="Tablets",t=f;break;case P.accessories:e="Accessories",t=_;break;default:e="",t=""}var q="ID: ".concat(function(e){switch(e){case"motorola-atrix-4g":return 802390;case"samsung-gem":return 802391;case"dell-venue":return 802392;case"nexus-s":return 802393;case"lg-axis":return 802394;case"samsung-showcase-a-galaxy-s-phone":return 802395;case"droid-2-global-by-motorola":return 802396;case"droid-pro-by-motorola":return 802397;case"motorola-bravo-with-motoblur":return 802398;case"motorola-defy-with-motoblur":case"t-mobile-mytouch-4g":return 802399;case"samsung-mesmerize-a-galaxy-s-phone":return 802400;case"sanyo-zio":return 802401;case"samsung-transform":return 802402;case"t-mobile-g2":return 802403;case"motorola-charm-with-motoblur":return 802404;case"motorola-xoom-with-wi-fi":return 802405;case"motorola-xoom":return 802406;case"dell-streak-7":return 802407;case"samsung-galaxy-tab":return 802408;default:return 0}}(null===j||void 0===j?void 0:j.id)),M=[{text:e,link:t},{text:(null===j||void 0===j?void 0:j.name)||""}],D=b()("product-details__specs","product-details__specs--up"),L=b()("product-details__specs","product-details__specs--down"),$=function(e){return k(e)};return Object(o.useEffect)((function(){Q().then((function(e){h(e.find((function(e){return e.id===S}))||null)})),function(e){if(!e)throw new Error("Product not found");var t="https://mate-academy.github.io/react_phone-catalog/api/products/".concat(e,".json");return fetch(t).then((function(e){return e.json()}))}(S).then(N).catch((function(){return r(!0)}))}),[S]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(I,{hasSearch:!1,activeCategory:E}),null!==j&&null!==g?Object(m.jsxs)("main",{className:"product-details",children:[Object(m.jsx)(je,{path:M}),Object(m.jsx)(we,{extraClass:"product-details__back"}),Object(m.jsx)(R,{extraClassName:"product-details__title",children:j.name}),Object(m.jsxs)("section",{className:"product-details__content-up",children:[Object(m.jsx)("ul",{className:"product-details__small-photos",children:g.images.map((function(e,t){var c=t===w;return Object(m.jsx)("li",{children:Object(m.jsx)(Ee,{isSelected:c,imageSource:e,index:t,onClick:$})},e)}))}),Object(m.jsx)("img",{className:"product-details__big-photo",src:g.images[w],alt:"Selected"}),Object(m.jsxs)("div",{className:"product-details__up-details",children:[Object(m.jsxs)("div",{className:"product-details__prices",children:[Object(m.jsx)(R,{children:A}),!!j.discount&&Object(m.jsx)(W,{children:j.price})]}),Object(m.jsx)("div",{className:"product-details__buttons",children:Object(m.jsx)(Z,{product:j,areBig:!0})}),Object(m.jsx)(ce,{isBig:!1,listClasses:D,specs:T})]}),Object(m.jsx)("p",{className:"product-details__id",children:q})]}),Object(m.jsxs)("section",{className:"product-details__content-down",children:[Object(m.jsxs)("div",{className:"product-details__content-down-left",children:[Object(m.jsx)(Fe,{children:"About"}),Object(m.jsx)("article",{className:"product-details__description","data-cy":"productDescription",children:g.description})]}),Object(m.jsxs)("div",{className:"product-details__content-down-right",children:[Object(m.jsx)(Fe,{children:"Tech-specs"}),Object(m.jsx)(ce,{isBig:!0,listClasses:L,specs:B})]})]}),Object(m.jsx)(re,{type:te.random,withoutId:j.id,children:"You may also like"})]}):!s&&Object(m.jsx)(Oe,{}),s&&Object(m.jsx)("main",{className:"product-details__not-found",children:Object(m.jsx)(R,{children:"Phone was not found"})}),Object(m.jsx)(x,{})]})},Be=function(){return Object(m.jsxs)("main",{className:"not-found",children:[Object(m.jsx)(R,{children:"Page not found"}),Object(m.jsx)(s.b,{to:"/",children:"Go to home"})]})},Ae=function(){var e="".concat(y,"/:productId");return Object(m.jsx)("div",{className:"App",children:Object(m.jsxs)(i.c,{children:[Object(m.jsx)(i.a,{path:"/",element:Object(m.jsx)(oe,{})}),Object(m.jsx)(i.a,{path:v,element:Object(m.jsx)(ge,{})}),Object(m.jsx)(i.a,{path:f,element:Object(m.jsx)(Ne,{})}),Object(m.jsx)(i.a,{path:_,element:Object(m.jsx)(ye,{})}),Object(m.jsx)(i.a,{path:g,element:Object(m.jsx)(Ce,{})}),Object(m.jsx)(i.a,{path:N,element:Object(m.jsx)(Se,{})}),Object(m.jsx)(i.a,{path:e,element:Object(m.jsx)(Te,{})}),Object(m.jsx)(i.a,{path:"/*",element:Object(m.jsx)(Be,{})})]})})};n.a.render(Object(m.jsx)(s.a,{children:Object(m.jsx)(o.StrictMode,{children:Object(m.jsx)(Ae,{})})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.47d8a47f.chunk.js.map