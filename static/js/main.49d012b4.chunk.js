(this["webpackJsonpreact_phone-catalog"]=this["webpackJsonpreact_phone-catalog"]||[]).push([[0],{28:function(e,t,c){},31:function(e,t,c){"use strict";c.r(t);var a,s=c(6),r=c(23),n=c.n(r),o=c(1),i=c(3);c(28);!function(e){e.left="left",e.right="right",e.top="up"}(a||(a={}));var l=c(7),u=c.n(l),d=c(0),j=function(e){var t=e.direction,c=e.buttonExtraClass,a=e.onClick,s=e.disabled,r=e.dataCy,n="img/arrows/arrow-".concat(t).concat(s?"-disabled":"",".svg"),o="Arrow ".concat(t),i=u()("arrow",{"arrow--disabled":s},c);return Object(d.jsx)("button",{className:i,type:"button",onClick:a,disabled:s,"data-cy":r,children:Object(d.jsx)("img",{className:"arrow__img",src:n,alt:o})})};j.defaultProps={buttonExtraClass:"",disabled:!1,dataCy:""};var b=function(e){var t=e.imageClasses;return Object(d.jsx)("img",{src:"img/logo.svg",alt:"Logo",className:t})},m=function(){var e=function(){return window.scrollTo(0,0)};return Object(d.jsxs)("footer",{className:"home__footer footer",children:[Object(d.jsxs)("div",{className:"footer__left",children:[Object(d.jsx)(b,{imageClasses:"footer__logo logo"}),Object(d.jsxs)("div",{className:"footer__links",children:[Object(d.jsx)("a",{className:"footer__link",href:"https://github.com/AmadeuszAndroid/react_phone-catalog/tree/develop",children:"Github"}),Object(d.jsx)("a",{className:"footer__link",href:"#/",children:"Contacts"}),Object(d.jsx)("a",{className:"footer__link",href:"#/",children:"rights"})]})]}),Object(d.jsxs)("div",{className:"footer__top-nav",children:[Object(d.jsx)("button",{className:"footer__top-link-text",type:"button",onClick:e,children:"Back to top"}),Object(d.jsx)(j,{direction:a.top,onClick:e})]})]})},h="/phones",p="/tablets",O="/accessories",x="/favorites",g=function(e){var t=e.count;return Object(d.jsx)("div",{className:"image-link__counter counter",children:Object(d.jsx)("span",{className:"counter__text",children:t})})},f=function(e){var t=e.link,c=e.imageSource,a=e.alternativeName,r=e.itemsCount;return Object(d.jsxs)(s.c,{className:"image-link",to:t,children:[Object(d.jsx)("img",{className:"image-link__icon",src:c,alt:a}),-1!==r&&Object(d.jsx)(g,{count:r})]})},_=function(e){var t=e.count,c=void 0===t?-1:t;return Object(d.jsx)(f,{alternativeName:"Cart",imageSource:"img/header/cart.svg",link:"/cart",itemsCount:c})};_.defaultProps={count:-1};var v=function(e){var t=e.count,c=void 0===t?-1:t;return Object(d.jsx)(f,{alternativeName:"Favourites",imageSource:"img/header/favourites.svg",link:x,itemsCount:c})};v.defaultProps={count:-1};var N=function(){return Object(d.jsxs)("nav",{className:"nav",children:[Object(d.jsx)(s.c,{className:"nav__link",to:"/",children:"home"}),Object(d.jsx)(s.c,{className:"nav__link",to:h,children:"phones"}),Object(d.jsx)(s.c,{className:"nav__link",to:p,children:"tablets"}),Object(d.jsx)(s.c,{className:"nav__link",to:O,children:"accessories"})]})},C=c(4),y="query",w="page",k=function(e){var t,c=e.currentPage,a=Object(s.d)(),r=Object(C.a)(a,2),n=r[0],i=r[1],l=Object(o.useRef)(null),u=n.get(y),j="Search in ".concat(c,"..."),b=function(){n.delete(y),i(n)};return Object(o.useEffect)((function(){var e=l.current;null!==e&&(e.value=u||"")}),[u]),Object(d.jsxs)("div",{className:"search",children:[n.get(y)?Object(d.jsx)("button",{onClick:b,type:"button",className:"search__close",children:Object(d.jsx)("img",{src:"img/header/search/close.svg",alt:"Clear search"})}):Object(d.jsx)("label",{className:"search__label",htmlFor:"search",children:Object(d.jsx)("img",{src:"img/header/search/search.svg",alt:"Search"})}),Object(d.jsx)("input",{id:"search",className:"search__input",type:"text",placeholder:j,onChange:function(e){var c=e.target.value;clearTimeout(t),t=+setTimeout((function(){c?(n.set(y,c),null!==n.get(w)&&n.set(w,"1"),i(n)):b()}),1e3)},ref:l})]})},P=function(e){var t=e.hasSearch,c=e.currentPage,a=e.favoritesCount,s=e.cartCount;return Object(d.jsxs)("header",{id:"header",className:"header",children:[Object(d.jsxs)("div",{className:"header__part header__part--left",children:[Object(d.jsx)(b,{imageClasses:"header__logo logo"}),Object(d.jsx)(N,{})]}),Object(d.jsxs)("div",{className:"header__part",children:[t&&Object(d.jsx)(k,{currentPage:c}),Object(d.jsx)(v,{count:a}),Object(d.jsx)(_,{count:s})]})]})};P.defaultProps={favoritesCount:-1,cartCount:-1};var S=function(e){var t=e.text,c=e.extraClassName,a=u()("title",c);return Object(d.jsx)("h1",{className:a,children:t})};S.defaultProps={extraClassName:""};var T,A=function(e){var t=e.name,c=e.imagePath,a=e.productsCount,s="".concat(a," models");return Object(d.jsxs)("div",{className:"category",children:[Object(d.jsx)("img",{className:"category__image",src:c,alt:t}),Object(d.jsx)("h3",{className:"category__name",children:t}),Object(d.jsx)("p",{className:"category__count",children:s})]})};!function(e){e.phone="phone",e.tablet="tablet",e.accessories="accessory",e.all="all"}(T||(T={}));var E="https://mate-academy.github.io/react_phone-catalog/api/products.json";function F(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T.all;return fetch(E).then((function(e){return e.json()})).then((function(t){return e===T.all?t:t.filter((function(t){return t.type===e}))}))}var L,M=function(){var e=Object(o.useState)([]),t=Object(C.a)(e,2),c=t[0],a=t[1];function r(e){return c.filter((function(t){return t.type===e})).length}var n=r(T.phone),i=r(T.tablet),l=r(T.accessories);return Object(o.useEffect)((function(){F().then(a)}),[]),Object(d.jsxs)("div",{className:"home__categories shop-by-category",children:[Object(d.jsx)(S,{text:"Shop by category"}),Object(d.jsxs)("div",{"data-cy":"categoryLinksContainer",className:"shop-by-category__categories",children:[Object(d.jsx)(s.b,{className:"shop-by-category__link",to:"phones",children:Object(d.jsx)(A,{imagePath:"img/home/categories/mobile-phones.png",name:"Mobile phones",productsCount:n})}),Object(d.jsx)(s.b,{className:"shop-by-category__link",to:"tablets",children:Object(d.jsx)(A,{imagePath:"img/home/categories/tablets.png",name:"Tablets",productsCount:i})}),Object(d.jsx)(s.b,{className:"shop-by-category__link",to:"accessories",children:Object(d.jsx)(A,{imagePath:"img/home/categories/accessories.png",name:"Accessories",productsCount:l})})]})]})};!function(e){e[e.phones=0]="phones",e[e.tablets=1]="tablets",e[e.accessories=2]="accessories"}(L||(L={}));var B=function(){var e,t=Object(o.useState)(0),c=Object(C.a)(t,2),s=c[0],r=c[1];switch(s){case L.tablets:e="tablets";break;case L.accessories:e="accessories";break;case L.phones:default:e="phones"}var n="img/home/slider/banner-".concat(e,".png"),i=u()("categories-slider__bar",{"categories-slider__bar--visible":0===s}),l=u()("categories-slider__bar",{"categories-slider__bar--visible":1===s}),b=u()("categories-slider__bar",{"categories-slider__bar--visible":2===s}),m=function(){var e;e=s===L.accessories?L.phones:s+1,r(e)};return Object(o.useEffect)((function(){var e=setInterval((function(){return m()}),5e3);return function(){return clearInterval(e)}}),[s]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"home__categories-slider categories-slider",children:[Object(d.jsx)(j,{direction:a.left,buttonExtraClass:"categories-slider__nav",onClick:function(){var e;e=s===L.phones?L.accessories:s-1,r(e)}}),Object(d.jsx)("img",{className:"categories-slider__image",src:n,alt:"Banner"}),Object(d.jsx)(j,{direction:a.right,buttonExtraClass:"categories-slider__nav",onClick:m})]}),Object(d.jsxs)("div",{className:"categories-slider__bars",children:[Object(d.jsx)("div",{className:i}),Object(d.jsx)("div",{className:l}),Object(d.jsx)("div",{className:b})]})]})},I=c(9),D=function(e){var t=e.name,c=e.value;return Object(d.jsxs)("div",{className:"product-card-details",children:[Object(d.jsx)("div",{className:"product-card-details__name",children:t}),Object(d.jsx)("div",{className:"product-card-details__value",children:c})]})};function J(e){var t=function(){var t=localStorage.getItem(e);return"string"===typeof t?JSON.parse(t):[]},c=Object(o.useState)(t),a=Object(C.a)(c,2),s=a[0],r=a[1];return[t,function(t){r(t),localStorage.setItem(e,JSON.stringify(t))},function(e){return s.some((function(t){return t.id===e}))},s.length]}var q=Object(o.createContext)({increment:function(){},decrement:function(){}});function R(e){return"".concat(e.split("MB")[0]," ","MB")}var $,z=function(e){var t=e.product,c=J("cart"),a=Object(C.a)(c,3),s=a[0],r=a[1],n=a[2],i=J("favorites"),l=Object(C.a)(i,3),j=l[0],b=l[1],m=l[2],h=Object(o.useContext)(q),p=h.increment,O=h.decrement,x=t.imageUrl,g=t.name,f=t.price,_=t.discount,v=t.screen,N=t.capacity,y=t.ram,w=t.id,k="$".concat(f-_/100*f),P="$".concat(f),S=v.replace(" inches","\u201d"),T=R(N),A=R(y),E=n(w)?"Added to cart":"Add to cart",F=u()("product-card__cart",{"product-card__cart--clicked":n(w)}),L=u()({"product-card__cart-text":!n(w),"product-card__cart-text--clicked":n(w)}),M=m(w)?"img/favorites/heart-selected.svg":"img/favorites/heart.svg";return Object(d.jsxs)("li",{className:"product-card",children:[Object(d.jsx)("img",{className:"product-card__image",src:x,alt:"Product"}),Object(d.jsx)("p",{className:"product-card__name",children:g}),Object(d.jsxs)("div",{className:"product-card__prices",children:[Object(d.jsx)("h2",{className:"product-card__current-price",children:k}),_>0&&Object(d.jsx)("div",{className:"product-card__previous-price",children:P})]}),Object(d.jsxs)("div",{className:"product-card__details",children:[Object(d.jsx)(D,{name:"screen",value:S}),Object(d.jsx)(D,{name:"capacity",value:T}),Object(d.jsx)(D,{name:"ram",value:A})]}),Object(d.jsxs)("footer",{className:"product-card__buttons",children:[Object(d.jsx)("button",{className:F,type:"button",onClick:function(){n(w)||r([].concat(Object(I.a)(s()),[t]))},children:Object(d.jsx)("span",{className:L,children:E})}),Object(d.jsx)("button",{className:"product-card__favorites",type:"button",onClick:function(){m(w)?(b(Object(I.a)(j().filter((function(e){return e.id!==w})))),O()):(b([].concat(Object(I.a)(j()),[t])),p())},"data-cy":"addToFavorite",children:Object(d.jsx)("img",{className:"product-card__heart",src:M,alt:"Add to favorites"})})]})]})},G=function(e){var t=e.products;return Object(d.jsx)("ul",{"data-cy":"cardsContainer",className:"products-slider__cards",children:t.map((function(e){return Object(d.jsx)(z,{product:e},e.id)}))})};!function(e){e[e.hotProducts=0]="hotProducts",e[e.newProducts=1]="newProducts"}($||($={}));var H,U=function(e){var t=e.title,c=e.type,s=Object(o.useState)([]),r=Object(C.a)(s,2),n=r[0],i=r[1],l=Object(o.useState)(0),u=Object(C.a)(l,2),b=u[0],m=u[1],h=n.slice(b,4+b),p=0===b,O=b+4===n.length;function x(e){return e.price*e.discount/100}return Object(o.useEffect)((function(){F().then((function(e){switch(c){case $.newProducts:return e.filter((function(e){return 0===e.discount})).sort((function(e,t){return e.age-t.age}));case $.hotProducts:default:return e.filter((function(e){return e.discount>0})).sort((function(e,t){return x(t)-x(e)}))}})).then(i)}),[]),Object(d.jsxs)("div",{className:"home__products-slider products-slider",children:[Object(d.jsxs)("div",{className:"products-slider__header",children:[Object(d.jsx)(S,{text:t}),Object(d.jsxs)("div",{className:"cardsContainer__arrows",children:[Object(d.jsx)(j,{direction:a.left,onClick:function(){b>0&&m(b-1)},disabled:p}),Object(d.jsx)(j,{direction:a.right,onClick:function(){b+4<n.length&&m(b+1)},disabled:O})]})]}),Object(d.jsx)(G,{products:h})]})},K=function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(P,{hasSearch:!1,currentPage:"home"}),Object(d.jsxs)("main",{className:"home",children:[Object(d.jsx)(B,{}),Object(d.jsx)(U,{title:"Hot prices",type:$.hotProducts}),Object(d.jsx)(M,{}),Object(d.jsx)(U,{title:"Brand new models",type:$.newProducts})]}),Object(d.jsx)(m,{})]})};!function(e){e.features="dropdown-features",e.pages="dropdown-pages"}(H||(H={}));var Q="query",V="page",W="perPage",X="sort",Y=function(e){var t=e.path;return Object(d.jsxs)("div",{"data-cy":"breadCrumbs",className:"products__breadcrumbs breadcrumbs",children:[Object(d.jsx)(s.b,{to:"/",children:Object(d.jsx)("img",{className:"breadcrumbs__image",src:"img/home-breadcrumbs.svg",alt:"home"})}),t.map((function(e,c){var a=e.link,r=e.text;return Object(d.jsxs)(o.Fragment,{children:[Object(d.jsx)("img",{className:"breadcrumbs__image",src:"img/arrows/arrow-right-breadcrumbs.svg",alt:"Arrow right"}),c===t.length-1?Object(d.jsx)("p",{className:"breadcrumbs__text",children:r}):Object(d.jsx)(s.b,{to:a||"",children:Object(d.jsx)("span",{className:"breadcrumbs__text",children:r})})]},Date.now())}))]})},Z=function(){return Object(d.jsx)(S,{text:"No search products found"})},ee=function(e){var t=e.countText,c=e.extraClasses,a=u()("products-count",c);return Object(d.jsx)("p",{className:a,children:t})},te=function(e){var t=e.products;return Object(d.jsx)("ul",{className:"products__list products-list","data-cy":"productList",children:t.map((function(e){return Object(d.jsx)(z,{product:e},e.id)}))})},ce=function(e){var t,c=e.id,a=e.description,r=e.options,n=Object(o.useState)(!1),i=Object(C.a)(n,2),l=i[0],j=i[1],b=Object(s.d)(),m=Object(C.a)(b,2),h=m[0],p=m[1],O=u()("dropdown__select",{"dropdown__select--big":c===H.features,"dropdown__select--small":c===H.pages}),x=u()("dropdown__arrow-icon",{"dropdown__arrow-icon--big":c===H.features,"dropdown__arrow-icon--small":c===H.pages}),g=u()("dropdown__list",{"dropdown__list--big":c===H.features,"dropdown__list--small":c===H.pages}),f="img/arrows/arrow-".concat(l?"up":"down","-dropdown.svg"),_=c===H.features?X:W,v=h.get(_),N=null===(t=r.find((function(e){return e.value===v})))||void 0===t?void 0:t.text;return Object(o.useEffect)((function(){null===h.get(_)&&(h.set(_,r[0].value),p(h))})),Object(d.jsxs)("div",{className:"dropdown",children:[Object(d.jsx)("p",{className:"dropdown__title",children:a}),Object(d.jsxs)("button",{className:O,type:"button",onClick:function(){j(!l)},onBlur:function(){return j(!1)},children:[Object(d.jsx)("div",{className:"dropdown__select-content",children:Object(d.jsx)("p",{className:"dropdown__select-text",children:N})}),Object(d.jsx)("img",{className:x,src:f,alt:"Dropdown arrow"})]}),l&&Object(d.jsx)("div",{className:g,children:r.map((function(e){var t=e.text,a=e.value;return Object(d.jsx)("button",{className:"dropdown__option",value:a,type:"button",onMouseDown:function(){return function(e){j(!1);var t=c===H.features?X:W;h.set(t,e),t===W&&("all"!==e?h.set(V,"1"):h.delete(V)),p(h)}(a)},children:t},t)}))})]})},ae=function(){return Object(d.jsx)("div",{className:"loader",children:Object(d.jsx)("div",{className:"loader__content"})})},se=function(e){var t=e.categoryName,c="".concat(t," not found");return Object(d.jsx)(S,{text:c})},re=function(e){var t=e.pageNumber,c=e.isSelected,a=e.onClick,s=u()("page",{page__active:c});return Object(d.jsx)("button",{type:"button",className:s,onClick:function(){return a(t)},disabled:c,children:t})},ne=function(e){for(var t=e.total,c=e.perPage,s=e.currentPage,r=void 0===s?1:s,n=e.onPageChange,o=[1],i=2;i<=Math.ceil(t/c);i+=1)o.push(i);return Object(d.jsxs)("div",{className:"products__pagination pagination","data-cy":"pagination",children:[Object(d.jsx)(j,{direction:a.left,onClick:function(){return n(r-1)},disabled:1===r,dataCy:"paginationLeft"}),Object(d.jsx)("ul",{className:"pagination__pages",children:o.map((function(e){return Object(d.jsx)("li",{children:Object(d.jsx)(re,{pageNumber:e,isSelected:e===r,onClick:n})},Date.now()+e)}))}),Object(d.jsx)(j,{direction:a.right,onClick:function(){return n(r+1)},disabled:r===o.length,dataCy:"paginationRight"})]})};ne.defaultProps={currentPage:1};var oe=function(e){var t,c,a,r,n,i,l=e.categoryType,j=Object(o.useState)(null),b=Object(C.a)(j,2),h=b[0],p=b[1],O=Object(o.useState)(0),x=Object(C.a)(O,2),g=x[0],f=x[1],_=Object(o.useState)(0),v=Object(C.a)(_,2),N=v[0],y=v[1],w=Object(s.d)(),k=Object(C.a)(w,2),A=k[0],E=k[1],L=null===(t=A.get(Q))||void 0===t?void 0:t.toLowerCase(),M=A.get(X),B=A.get(W),D=+(A.get(V)||1),J=(null===h||void 0===h?void 0:h.length)||0;switch(l){case T.tablet:c="tablets",a="Tablets",r=F(T.tablet),n="Tablets";break;case T.accessories:c="accesories",a="Accessories",r=F(T.accessories),n="Accessories";break;default:case T.phone:c="phones",a="Phones",r=F(T.phone),n="Mobile phones"}i="all"===B?J:+(B||J);var q,R=[{text:a}];q=L?"".concat(g," result").concat(1===g?"":"s"):"".concat(g," model").concat(1===g?"":"s");var $=g>=4,z=["age","name","price"],G=["all","4","8","16"],U=[{text:"Newest",value:z[0]},{text:"Alphabetically",value:z[1]},{text:"Cheapest",value:z[2]}],K=u()("products__count",{"products__count--query":L}),re=G.map((function(e){return{text:e,value:e}})),oe=B!==G[0]&&g>=i&&$,ie=null===A.get(V)||Number.isInteger(D)&&D>0&&D<=Math.ceil(g/i),le=!g&&L||M&&!z.includes(M)||B&&!G.includes(B)||!ie;return Object(o.useEffect)((function(){r.then((function(e){y(e.length);var t=Object(I.a)(e);if(L&&(t=e.filter((function(e){return e.name.toLowerCase().includes(L)}))),f(t.length),t.sort((function(e,t){switch(M){case"price":return e.price-t.price;default:case"name":return e.name.localeCompare(t.name);case"age":return e.age-t.age}})),B&&B!==G[0]){var c=(D-1)*i,a=D*i-1;p(t.filter((function(e,t){return t>=c&&t<=a})))}else p(t)}))}),[L,M,D,B]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(P,{hasSearch:!0,currentPage:c}),null===h?Object(d.jsx)(ae,{}):Object(d.jsxs)("main",{className:"products",children:[!L&&Object(d.jsx)(Y,{path:R}),le||!N?Object(d.jsx)("div",{className:"products__no-results",children:N?Object(d.jsx)(Z,{}):Object(d.jsx)(se,{categoryName:n})}):Object(d.jsxs)(d.Fragment,{children:[!L&&Object(d.jsx)(S,{text:n,extraClassName:"products__title"}),Object(d.jsx)(ee,{countText:q,extraClasses:K}),$&&Object(d.jsxs)("div",{className:"products__filters",children:[Object(d.jsx)(ce,{id:H.features,description:"Sort by",options:U}),Object(d.jsx)(ce,{id:H.pages,description:"Items on page",options:re})]}),J&&Object(d.jsx)(te,{products:h}),oe&&Object(d.jsx)(ne,{onPageChange:function(e){A.set(V,e.toString()),E(A)},perPage:i,currentPage:D,total:g})]})]}),Object(d.jsx)(m,{})]})},ie=function(){return Object(d.jsx)(oe,{categoryType:T.phone})},le=function(){return Object(d.jsx)(oe,{categoryType:T.tablet})},ue=function(){return Object(d.jsx)(oe,{categoryType:T.accessories})},de=function(){var e,t=J("favorites"),c=Object(C.a)(t,1)[0],a=Object(s.d)(),r=null===(e=Object(C.a)(a,1)[0].get(Q))||void 0===e?void 0:e.toLowerCase(),n=Object(o.useState)(c()),i=Object(C.a)(n,2),l=i[0],u=i[1],j=Object(o.useState)(l.length),b=Object(C.a)(j,2),h=b[0],p=b[1],O="".concat(h," item").concat(1===h?"":"s");return Object(o.useEffect)((function(){if(r){var e=l.filter((function(e){return e.name.toLowerCase().includes(r)}));u(e),p(e.length)}else{var t=c();u(t),p(t.length)}}),[r,h]),Object(d.jsxs)(q.Provider,{value:{increment:function(){return p((function(e){return e+1}))},decrement:function(){return p((function(e){return e-1}))}},children:[Object(d.jsx)(P,{hasSearch:!0,currentPage:"favourites",favoritesCount:h}),Object(d.jsxs)("main",{className:"favourites",children:[Object(d.jsx)(Y,{path:[{text:"Favourites"}]}),Object(d.jsx)(S,{text:"Favourites",extraClassName:"favourites__title"}),Object(d.jsx)(ee,{countText:O,extraClasses:"favourites__count"}),Object(d.jsx)(te,{products:l})]}),Object(d.jsx)(m,{})]})},je=function(){return Object(d.jsx)("div",{className:"App",children:Object(d.jsxs)(i.c,{children:[Object(d.jsx)(i.a,{path:"/",element:Object(d.jsx)(K,{})}),Object(d.jsx)(i.a,{path:h,element:Object(d.jsx)(ie,{})}),Object(d.jsx)(i.a,{path:p,element:Object(d.jsx)(le,{})}),Object(d.jsx)(i.a,{path:O,element:Object(d.jsx)(ue,{})}),Object(d.jsx)(i.a,{path:x,element:Object(d.jsx)(de,{})})]})})};n.a.render(Object(d.jsx)(s.a,{children:Object(d.jsx)(o.StrictMode,{children:Object(d.jsx)(je,{})})}),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.49d012b4.chunk.js.map