(this["webpackJsonpreact_phone-catalog"]=this["webpackJsonpreact_phone-catalog"]||[]).push([[0],{30:function(e,t,c){},33:function(e,t,c){"use strict";c.r(t);var a,s=c(7),r=c(25),n=c.n(r),o=c(1),i=c(3),l=c(4);c(30);function u(e){return""===e?"":"".concat(e.split("MB")[0]," ","MB")}function d(e){return""===e?"":e.replace(" inches","\u201d")}function j(){return window.innerWidth>1030}!function(e){e.left="left",e.right="right",e.top="up"}(a||(a={}));var b=c(5),m=c.n(b),h=c(0),O=function(e){var t=e.direction,c=e.buttonExtraClass,a=e.onClick,s=e.disabled,r=e.dataCy,n="img/arrows/arrow-".concat(t).concat(s?"-disabled":"",".svg"),o="Arrow ".concat(t),i=m()("arrow",{"arrow--disabled":s},c);return Object(h.jsx)("button",{className:i,type:"button",onClick:a,disabled:s,"data-cy":r,children:Object(h.jsx)("img",{className:"arrow__img",src:n,alt:o})})};O.defaultProps={buttonExtraClass:"",disabled:!1,dataCy:""};var p=Object(o.createContext)({expandMenu:function(){},collapseMenu:function(){}}),x=function(){var e=Object(o.useContext)(p).collapseMenu;return Object(h.jsxs)("div",{className:"bottom-navigation",children:[Object(h.jsx)("a",{className:"bottom-navigation__link",href:"https://github.com/AmadeuszAndroid/react_phone-catalog/tree/develop",children:"Github"}),Object(h.jsx)("a",{className:"bottom-navigation__link",href:"#/",onClick:e,children:"Contacts"}),Object(h.jsx)("a",{className:"bottom-navigation__link",href:"#/",onClick:e,children:"rights"})]})},v=function(e){var t=e.imageExtraClass,c=m()("logo",t);return Object(h.jsx)("img",{src:"img/logo.svg",alt:"Logo",className:c})};v.defaultProps={imageExtraClass:""};var f=function(e){var t=e.hasTopNav,c=void 0===t||t,s=function(){return window.scrollTo(1440,0)};return Object(h.jsxs)("footer",{className:"home__footer footer",children:[Object(h.jsxs)("div",{className:"footer__left",children:[Object(h.jsx)(v,{imageExtraClass:"footer__logo logo"}),j()&&Object(h.jsx)(x,{})]}),c&&Object(h.jsxs)("nav",{className:"footer__top-nav",children:[Object(h.jsx)("button",{className:"footer__top-link-text",type:"button",onClick:s,children:"Back to top"}),Object(h.jsx)(O,{direction:a.top,onClick:s})]})]})};f.defaultProps={hasTopNav:!0};var _="/phones",g="/tablets",N="/accessories",C="/favorites",y="/cart",k="/product",w=function(e){var t=e.count;return Object(h.jsx)("div",{className:"image-link__counter counter",children:Object(h.jsx)("span",{className:"counter__text",children:t})})},P=function(e){var t=e.link,c=e.imageSource,a=e.alternativeName,r=e.itemsCount,n=Object(o.useContext)(p).collapseMenu;return Object(h.jsxs)(s.c,{className:"image-link",to:t,onClick:n,children:[Object(h.jsx)("img",{className:"image-link__icon",src:c,alt:a}),-1!==r&&Object(h.jsx)(w,{count:r})]})},S=function(e){var t=e.count,c=void 0===t?-1:t;return Object(h.jsx)(P,{alternativeName:"Cart",imageSource:"img/header/cart.svg",link:y,itemsCount:c})};S.defaultProps={count:-1};var E,F=function(e){var t=e.count,c=void 0===t?-1:t;return Object(h.jsx)(P,{alternativeName:"Favourites",imageSource:"img/header/favourites.svg",link:C,itemsCount:c})};F.defaultProps={count:-1},function(e){e.phone="phone",e.tablet="tablet",e.accessories="accessory",e.all="all"}(E||(E={}));var T=function(e){var t=e.activeLink,c=Object(o.useContext)(p).collapseMenu,a="nav__link",r=m()(a,{active:t===E.phone}),n=m()(a,{active:t===E.tablet}),i=m()(a,{active:t===E.accessories});return Object(h.jsxs)("nav",{className:"nav",children:[Object(h.jsx)(s.c,{className:"nav__link",to:"/",onClick:c,children:"home"}),Object(h.jsx)(s.c,{className:r,to:_,onClick:c,children:"phones"}),Object(h.jsx)(s.c,{className:n,to:g,onClick:c,children:"tablets"}),Object(h.jsx)(s.c,{className:i,to:N,onClick:c,children:"accessories"})]})};T.defaultProps={activeLink:E.all};var B="query",M="page",A=function(e){var t,c=e.currentPage,a=Object(s.d)(),r=Object(i.a)(a,2),n=r[0],l=r[1],u=Object(o.useRef)(null),d=n.get(B),j="Search in ".concat(c,"..."),b=function(){n.delete(B),l(n)};return Object(o.useEffect)((function(){var e=u.current;null!==e&&(e.value=d||"")}),[d]),Object(h.jsxs)("div",{className:"search",children:[n.get(B)?Object(h.jsx)("button",{onClick:b,type:"button",className:"search__close","data-cy":"searchDelete",children:Object(h.jsx)("img",{src:"img/header/search/close.svg",alt:"Clear search"})}):Object(h.jsx)("label",{className:"search__label",htmlFor:"search",children:Object(h.jsx)("img",{src:"img/header/search/search.svg",alt:"Search"})}),Object(h.jsx)("input",{id:"search",className:"search__input",type:"text",placeholder:j,onChange:function(e){var c=e.target.value;clearTimeout(t),t=+setTimeout((function(){c?(n.set(B,c),null!==n.get(M)&&n.set(M,"1"),l(n)):b()}),1e3)},ref:u})]})},I=function(e){var t=e.hasSearch,c=e.currentPage,a=void 0===c?"":c,s=e.favoritesCount,r=e.cartCount,n=e.hasNav,i=e.hasFavorites,l=e.activeLink,u=Object(o.useContext)(p).expandMenu;return Object(h.jsxs)("header",{id:"header",className:"header",children:[Object(h.jsx)("div",{className:"header__part header__part--left",children:j()?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(v,{imageExtraClass:"header__logo logo"}),n&&Object(h.jsx)(T,{activeLink:l})]}):Object(h.jsx)("button",{className:"header__dropdown-menu",onClick:u,type:"button",children:Object(h.jsx)("img",{src:"img/menu.svg",alt:"menu"})})}),Object(h.jsxs)("div",{className:"header__part",children:[t&&Object(h.jsx)(A,{currentPage:a}),j()&&i&&Object(h.jsx)(F,{count:s}),j()&&Object(h.jsx)(S,{count:r})]})]})};I.defaultProps={favoritesCount:-1,cartCount:-1,currentPage:"",hasNav:!0,hasFavorites:!0,activeLink:E.all};var L=function(e){var t=e.children,c=e.extraClassName,a=m()("title",c);return Object(h.jsx)("h1",{className:a,children:t})};L.defaultProps={extraClassName:""};var R=function(e){var t=e.name,c=e.imagePath,a=e.productsCount,s="".concat(a," models");return Object(h.jsxs)("div",{className:"category",children:[Object(h.jsx)("img",{className:"category__image",src:c,alt:t}),Object(h.jsx)("h3",{className:"category__name",children:t}),Object(h.jsx)("p",{className:"category__count",children:s})]})},q=c(15),D="https://mate-academy.github.io/react_phone-catalog/api/products.json",Q=0;function $(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E.all;return fetch(D).then((function(e){return e.json()})).then((function(t){Q=0;var c=t.map((function(e){var t=e.price,c=t*e.discount/100;return Object(q.a)(Object(q.a)({},e),{},{discountedPrice:+(t-c).toFixed(2)})}));return e===E.all?c:c.filter((function(t){return t.type===e}))})).catch((function(){return Q<20?(Q+=1,$(e)):(Q=0,[])}))}function J(e){return e.price*e.discount/100}var z,U=function(){var e=Object(o.useState)([]),t=Object(i.a)(e,2),c=t[0],a=t[1];function r(e){return c.filter((function(t){return t.type===e})).length}var n=r(E.phone),l=r(E.tablet),u=r(E.accessories);return Object(o.useEffect)((function(){$().then(a)}),[]),Object(h.jsxs)("div",{className:"home__categories shop-by-category",children:[Object(h.jsx)(L,{children:"Shop by category"}),Object(h.jsxs)("div",{"data-cy":"categoryLinksContainer",className:"shop-by-category__categories",children:[Object(h.jsx)(s.b,{className:"shop-by-category__link",to:"phones",children:Object(h.jsx)(R,{imagePath:"img/home/categories/mobile-phones.png",name:"Mobile phones",productsCount:n})}),Object(h.jsx)(s.b,{className:"shop-by-category__link",to:"tablets",children:Object(h.jsx)(R,{imagePath:"img/home/categories/tablets.png",name:"Tablets",productsCount:l})}),Object(h.jsx)(s.b,{className:"shop-by-category__link",to:"accessories",children:Object(h.jsx)(R,{imagePath:"img/home/categories/accessories.png",name:"Accessories",productsCount:u})})]})]})},W=function(e){var t=e.src,c=e.alt;return Object(h.jsx)("li",{className:"category-slider-image",children:Object(h.jsx)("img",{className:"category-slider-image__banner",src:t,alt:c})})};!function(e){e[e.phones=0]="phones",e[e.tablets=1]="tablets",e[e.accessories=2]="accessories"}(z||(z={}));var G=function(){var e=Object(o.useState)(0),t=Object(i.a)(e,2),c=t[0],s=t[1],r=["phones","tablets","accessories"].map((function(e){return{src:"img/home/slider/banner-".concat(e,".png"),alt:e}})),n=c===z.tablets,l=c===z.accessories,u=m()("categories-slider__images",{"categories-slider__images--1":n,"categories-slider__images--2":l}),d=m()("categories-slider__bar",{"categories-slider__bar--visible":0===c}),j=m()("categories-slider__bar",{"categories-slider__bar--visible":1===c}),b=m()("categories-slider__bar",{"categories-slider__bar--visible":2===c}),p=function(){var e;e=c===z.accessories?z.phones:c+1,s(e)};return Object(o.useEffect)((function(){var e=setInterval((function(){return p()}),5e3);return function(){return clearInterval(e)}}),[c]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"home__categories-slider categories-slider",children:[Object(h.jsx)(O,{direction:a.left,buttonExtraClass:"categories-slider__nav",onClick:function(){var e;e=c===z.phones?z.accessories:c-1,s(e)}}),Object(h.jsx)("div",{className:"categories-slider__content",children:Object(h.jsx)("ul",{className:u,children:r.map((function(e){var t=e.src,c=e.alt;return Object(h.jsx)(W,{alt:c,src:t},c)}))})}),Object(h.jsx)(O,{direction:a.right,buttonExtraClass:"categories-slider__nav",onClick:p})]}),Object(h.jsxs)("div",{className:"categories-slider__bars",children:[Object(h.jsx)("div",{className:d}),Object(h.jsx)("div",{className:j}),Object(h.jsx)("div",{className:b})]})]})},Y=function(e){var t=e.children,c="$".concat(t);return Object(h.jsx)("h2",{className:"old-price",children:c})},H=c(10);function K(e){var t=function(){var t=localStorage.getItem(e);return"string"===typeof t?JSON.parse(t):[]},c=Object(o.useState)(t),a=Object(i.a)(c,2),s=a[0],r=a[1],n=s.reduce((function(e,t){return e+t.quantity}),0);return[t,function(t){r(t),localStorage.setItem(e,JSON.stringify(t))},function(e){return s.some((function(t){return"id"in t?t.id===e:t.product.id===e}))},s.length,n]}var V="favorites",X="cart",Z=Object(o.createContext)({increment:function(){},decrement:function(){}}),ee=function(e){var t=e.children,c=e.buttonClasses,a=e.textClasses,s=e.onClick;return Object(h.jsx)("button",{className:c,type:"button",onClick:s,children:Object(h.jsx)("div",{className:a,children:t})})},te=function(e){var t=e.product,c=e.areBig,a=K(X),s=Object(i.a)(a,3),r=s[0],n=s[1],l=s[2],u=K(V),d=Object(i.a)(u,3),j=d[0],b=d[1],O=d[2],p=Object(o.useContext)(Z),x=p.increment,v=p.decrement,f=t.id,_=l(f),g=m()("button",{"button--clicked":_,"button--big":c}),N=m()("button__text",{"button__text--clicked":_}),C=_?"Added to cart":"Add to cart",y=m()("product-buttons__favorites",{"product-buttons__favorites--big":c}),k=O(f)?"img/favorites/heart-selected.svg":"img/favorites/heart.svg";return Object(h.jsxs)("div",{className:"product-buttons",children:[Object(h.jsx)(ee,{buttonClasses:g,onClick:function(){if(!l(f)){var e={product:t,quantity:1};n([].concat(Object(H.a)(r()),[e]))}},textClasses:N,children:C}),Object(h.jsx)("button",{className:y,type:"button",onClick:function(){O(f)?(b(Object(H.a)(j().filter((function(e){return"id"in e?e.id!==f:e.product.id!==f})))),v()):(b([].concat(Object(H.a)(j()),[t])),x())},"data-cy":"addToFavorite",children:Object(h.jsx)("img",{className:"product-buttons__heart",src:k,alt:"Add to favorites"})})]})};te.defaultProps={areBig:!1};var ce=function(e){var t=e.name,c=e.value,a=e.isBig,s=m()("product-spec__name",{"product-spec__name--big":a}),r=m()("product-spec__value",{"product-spec__value--big":a,"product-spec__value--small":!a});return Object(h.jsxs)("div",{className:"product-spec",children:[Object(h.jsx)("div",{className:s,children:t}),Object(h.jsx)("div",{className:r,children:c})]})};ce.defaultProps={isBig:!1};var ae,se=function(e){var t=e.specs,c=e.isBig,a=e.listClasses;return Object(h.jsx)("ul",{className:a,children:t.map((function(e){var t=e.name,a=e.value;if(a)return Object(h.jsx)(ce,{name:t,value:a,isBig:c},t)}))})},re=function(e){var t=e.product,c=t.imageUrl,a=t.name,r=t.price,n=t.discountedPrice,o=t.screen,i=t.capacity,l=t.ram,j=t.id,b="$".concat(n),m=d(o),O=u(i),p=u(l),x="".concat(k,"/").concat(j),v=[{name:"Screen",value:m},{name:"Capacity",value:O},{name:"Ram",value:p}];return Object(h.jsxs)("li",{className:"product-card",children:[Object(h.jsxs)(s.b,{className:"product-card__link",to:x,children:[Object(h.jsx)("img",{className:"product-card__image",src:c,alt:"Product"}),Object(h.jsx)("p",{className:"product-card__name",children:a}),Object(h.jsxs)("div",{className:"product-card__prices",children:[Object(h.jsx)("h2",{className:"product-card__current-price",children:b}),n<r&&Object(h.jsx)(Y,{children:r})]}),Object(h.jsx)(se,{isBig:!1,listClasses:"product-card__details",specs:v})]}),Object(h.jsx)("div",{className:"product-card__buttons",children:Object(h.jsx)(te,{product:t})})]})},ne=function(e){var t=e.products;return Object(h.jsx)("ul",{"data-cy":"cardsContainer",className:"products-slider__cards",children:t.map((function(e){return Object(h.jsx)(re,{product:e},e.id)}))})};!function(e){e[e.hotProducts=0]="hotProducts",e[e.newProducts=1]="newProducts",e[e.random=2]="random"}(ae||(ae={}));var oe=1440,ie=1024,le=700,ue=function(e){var t=e.type,c=e.children,s=e.withoutId,r=void 0===s?"":s,n=Object(o.useState)([]),l=Object(i.a)(n,2),u=l[0],d=l[1],j=Object(o.useState)(0),b=Object(i.a)(j,2),p=b[0],x=b[1],v=4,f=document.documentElement.clientWidth;f<oe&&f>=ie?v=3:f<ie&&f>=le?v=2:f<le&&(v=1);var _=u.slice(p,v+p),g=0===p,N=p+v===u.length,C=m()("products-slider",{"home__products-slider--down":t===ae.newProducts,"home__products-slider--up":t===ae.hotProducts,"product-details__slider":t===ae.random});return Object(o.useEffect)((function(){switch(t){case ae.newProducts:return void $().then((function(e){return e.filter((function(e){return 0===e.discount})).sort((function(e,t){return t.price-e.price}))})).then(d);case ae.random:return void function(e){return $().then((function(t){for(var c=t.filter((function(t){return t.id!==e})),a=[],s=function(){var e=Math.floor(Math.random()*c.length),t=c[e];a.push(t),c=c.filter((function(e){return e.id!==t.id}))};c.length;)s();return a}))}(r).then(d);case ae.hotProducts:default:$().then((function(e){return e.filter((function(e){return e.discount>0})).sort((function(e,t){return J(t)-J(e)}))})).then(d)}}),[r]),Object(h.jsxs)("div",{className:C,children:[Object(h.jsxs)("div",{className:"products-slider__header",children:[Object(h.jsx)(L,{children:c}),Object(h.jsxs)("div",{className:"cardsContainer__arrows",children:[Object(h.jsx)(O,{direction:a.left,onClick:function(){p>0&&x(p-1)},disabled:g}),Object(h.jsx)(O,{direction:a.right,onClick:function(){p+v<u.length&&x(p+1)},disabled:N})]})]}),Object(h.jsx)(ne,{products:_})]})};ue.defaultProps={withoutId:""};var de,je=function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(I,{hasSearch:!1,currentPage:"home"}),Object(h.jsxs)("main",{className:"home",children:[Object(h.jsx)(G,{}),Object(h.jsx)(ue,{type:ae.hotProducts,children:"Hot prices"}),Object(h.jsx)(U,{}),Object(h.jsx)(ue,{type:ae.newProducts,children:"Brand new models"})]}),Object(h.jsx)(f,{})]})};!function(e){e.features="dropdown-features",e.pages="dropdown-pages"}(de||(de={}));var be="query",me="page",he="perPage",Oe="sort",pe=function(e){var t=e.path;return Object(h.jsxs)("div",{"data-cy":"breadCrumbs",className:"products__breadcrumbs breadcrumbs",children:[Object(h.jsx)(s.b,{to:"/",children:Object(h.jsx)("img",{className:"breadcrumbs__home",src:"img/home-breadcrumbs.svg",alt:"home"})}),t.map((function(e,c){var a=e.link,r=e.text;return Object(h.jsxs)(o.Fragment,{children:[Object(h.jsx)("img",{className:"breadcrumbs__image",src:"img/arrows/arrow-right-breadcrumbs.svg",alt:"Arrow right"}),c===t.length-1?Object(h.jsx)("p",{className:"breadcrumbs__text",children:r}):Object(h.jsx)(s.b,{to:a||"",children:Object(h.jsx)("span",{className:"breadcrumbs__text breadcrumbs__link",children:r})})]},a+r)}))]})},xe=function(){return Object(h.jsx)(L,{children:"No search products found"})},ve=function(e){var t=e.countText,c=e.extraClasses,a=m()("products-count",c);return Object(h.jsx)("p",{className:a,children:t})},fe=function(e){var t=e.products;return Object(h.jsx)("ul",{className:"products__list products-list","data-cy":"productList",children:t.map((function(e){return Object(h.jsx)(re,{product:e},e.id)}))})},_e=function(e){var t,c=e.id,a=e.description,r=e.options,n=Object(o.useState)(!1),l=Object(i.a)(n,2),u=l[0],d=l[1],j=Object(o.useState)(-1),b=Object(i.a)(j,2),O=b[0],p=b[1],x=Object(o.useState)(!1),v=Object(i.a)(x,2),f=v[0],_=v[1],g=Object(o.useState)(!1),N=Object(i.a)(g,2),C=N[0],y=N[1],k=Object(s.d)(),w=Object(i.a)(k,2),P=w[0],S=w[1],E=Object(o.useRef)(null),F=Object(o.useRef)(null),T=Object(o.useRef)(null),B=Object(o.useRef)(null),M=m()("dropdown__select",{"dropdown__select--big":c===de.features,"dropdown__select--small":c===de.pages}),A=m()("dropdown__arrow-icon",{"dropdown__arrow-icon--big":c===de.features,"dropdown__arrow-icon--small":c===de.pages}),I=m()("dropdown__list",{"dropdown__list--big":c===de.features,"dropdown__list--small":c===de.pages}),L="img/arrows/arrow-".concat(u?"up":"down","-dropdown.svg"),R=c===de.features?Oe:he,q=P.get(R),D=null===(t=r.find((function(e){return e.value===q})))||void 0===t?void 0:t.text,Q=function(){f||d(!u)},$=function(e){d(!1);var t=c===de.features?Oe:he;P.set(t,e),t===he&&("all"===e?P.delete(me):P.set(me,"1")),S(P)},J=function(){C||(_(!0),d(!1),p(-1),window.setTimeout((function(){return _(!1)}),500))};null===P.get(R)&&(P.set(R,r[0].value),S(P));var z=function(e){y(!0);var t=e.key,a="ArrowUp"===t,s="ArrowDown"===t,n="Enter"===t,o="Escape"===t,i=c===de.pages;if(u&&(a||s||n||o)){switch(e.preventDefault(),O){case 0:var l;if(s)null===(l=F.current)||void 0===l||l.focus(),p((function(e){return e+1}));break;case 1:var d;if(a)null===(d=E.current)||void 0===d||d.focus(),p((function(e){return e-1}));else if(s){var j;null===(j=T.current)||void 0===j||j.focus(),p((function(e){return e+1}))}break;case 2:var b;if(a)null===(b=F.current)||void 0===b||b.focus(),p((function(e){return e-1}));else if(s&&i){var m;null===(m=B.current)||void 0===m||m.focus(),p((function(e){return e+1}))}break;case 3:var h;if(a&&i)null===(h=T.current)||void 0===h||h.focus(),p((function(e){return e-1}))}n&&$(r[O].value),o&&Q()}y(!1)};return Object(o.useEffect)((function(){var e;u&&(p(0),null!==E&&(null===(e=E.current)||void 0===e||e.focus()))}),[u]),Object(o.useEffect)((function(){return window.addEventListener("keydown",z),function(){window.removeEventListener("keydown",z)}}),[u,O]),Object(h.jsxs)("div",{className:"dropdown",children:[Object(h.jsx)("p",{className:"dropdown__title",children:a}),Object(h.jsxs)("button",{className:M,type:"button",onClick:Q,children:[Object(h.jsx)("div",{className:"dropdown__select-content",children:Object(h.jsx)("p",{className:"dropdown__select-text",children:D})}),Object(h.jsx)("img",{className:A,src:L,alt:"Dropdown arrow"})]}),u&&Object(h.jsx)("div",{className:I,children:r.map((function(e,t){var c,a=e.text,s=e.value;switch(t){case 1:c=F;break;case 2:c=T;break;case 3:c=B;break;default:c=E}return Object(h.jsx)("button",{className:"dropdown__option",value:s,type:"button",onMouseDown:function(){return $(s)},ref:c,onBlur:J,children:a},a)}))})]})},ge=function(){return Object(h.jsx)("div",{className:"loader",children:Object(h.jsx)("div",{className:"loader__content"})})},Ne=function(e){var t=e.categoryName,c="".concat(t," not found");return Object(h.jsx)(L,{children:c})},Ce=function(e){var t=e.pageNumber,c=e.isSelected,a=e.onClick,s=m()("page",{page__active:c});return Object(h.jsx)("button",{type:"button",className:s,onClick:function(){return a(t)},disabled:c,children:t})},ye=function(e){for(var t=e.total,c=e.perPage,s=e.currentPage,r=void 0===s?1:s,n=e.onPageChange,o=[1],i=2;i<=Math.ceil(t/c);i+=1)o.push(i);return Object(h.jsxs)("div",{className:"products__pagination pagination","data-cy":"pagination",children:[Object(h.jsx)(O,{direction:a.left,onClick:function(){return n(r-1)},disabled:1===r,dataCy:"paginationLeft"}),Object(h.jsx)("ul",{className:"pagination__pages",children:o.map((function(e){return Object(h.jsx)("li",{children:Object(h.jsx)(Ce,{pageNumber:e,isSelected:e===r,onClick:n})},Date.now()+e)}))}),Object(h.jsx)(O,{direction:a.right,onClick:function(){return n(r+1)},disabled:r===o.length,dataCy:"paginationRight"})]})};ye.defaultProps={currentPage:1};var ke=function(e){var t,c,a,r,n,l,u=e.categoryType,d=Object(o.useState)(null),j=Object(i.a)(d,2),b=j[0],O=j[1],p=Object(o.useState)(0),x=Object(i.a)(p,2),v=x[0],_=x[1],g=Object(o.useState)(-1),N=Object(i.a)(g,2),C=N[0],y=N[1],k=Object(o.useState)(!1),w=Object(i.a)(k,2),P=w[0],S=w[1],F=Object(s.d)(),T=Object(i.a)(F,2),B=T[0],M=T[1],A=null===(t=B.get(be))||void 0===t?void 0:t.toLowerCase(),R=B.get(Oe),q=B.get(he),D=+(B.get(me)||1),Q=(null===b||void 0===b?void 0:b.length)||0;switch(u){case E.tablet:c="tablets",a="Tablets",r=$(E.tablet),n="Tablets";break;case E.accessories:c="accesories",a="Accessories",r=$(E.accessories),n="Accessories";break;default:case E.phone:c="phones",a="Phones",r=$(E.phone),n="Mobile phones"}var J=["age","name","price"],z=["all","4","8","16"],U=v>=+z[1],W=[{text:"Newest",value:J[0]},{text:"Alphabetically",value:J[1]},{text:"Cheapest",value:J[2]}],G=m()("products__count",{"products__count--query":A}),Y=z.map((function(e){return{text:e,value:e}}));l=q===z[0]?Q:+(q||Q);var K,V=[{text:a}];K=A?"".concat(v," result").concat(1===v?"":"s"):"".concat(v," model").concat(1===v?"":"s");var X=q!==z[0]&&v>=l&&U,Z=null===B.get(me)||Number.isInteger(D)&&D>0&&D<=Math.ceil(v/l),ee=!v&&A||R&&!J.includes(R)||q&&!z.includes(q)||!Z;return Object(o.useEffect)((function(){P||(null===B.get(he)&&B.set(he,z[0]),null===B.get(Oe)&&B.set(Oe,J[0]),M(B,{replace:!0}),S(!0))}),[]),Object(o.useEffect)((function(){null!==B.get("sort")&&null!==B.get("perPage")&&r.then((function(e){y(e.length);var t=Object(H.a)(e);if(A&&(t=e.filter((function(e){return e.name.toLowerCase().includes(A)}))),_(t.length),t.sort((function(e,t){switch(R){case"price":return e.price-t.price;default:case"name":return e.name.localeCompare(t.name);case"age":return e.age-t.age}})),q&&q!==z[0]){var c=(D-1)*l,a=D*l-1;O(t.filter((function(e,t){return t>=c&&t<=a})))}else O(t)}))}),[A,R,D,q]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(I,{hasSearch:!0,currentPage:c}),null===b?Object(h.jsx)(ge,{}):Object(h.jsxs)("main",{className:"products",children:[!A&&Object(h.jsx)(pe,{path:V}),ee||!C?Object(h.jsx)("div",{className:"products__no-results",children:C?Object(h.jsx)(xe,{}):Object(h.jsx)(Ne,{categoryName:n})}):Object(h.jsxs)(h.Fragment,{children:[!A&&Object(h.jsx)(L,{extraClassName:"products__title",children:n}),Object(h.jsx)(ve,{countText:K,extraClasses:G}),U&&Object(h.jsxs)("div",{className:"products__filters",children:[Object(h.jsx)(_e,{id:de.features,description:"Sort by",options:W}),Object(h.jsx)(_e,{id:de.pages,description:"Items on page",options:Y})]}),Q&&Object(h.jsx)(fe,{products:b}),X&&Object(h.jsx)(ye,{onPageChange:function(e){B.set(me,e.toString()),M(B)},perPage:l,currentPage:D,total:v})]})]}),Object(h.jsx)(f,{})]})},we=function(){return Object(h.jsx)(ke,{categoryType:E.phone})},Pe=function(){return Object(h.jsx)(ke,{categoryType:E.tablet})},Se=function(){return Object(h.jsx)(ke,{categoryType:E.accessories})},Ee=function(){var e,t=K("favorites"),c=Object(i.a)(t,1)[0],a=Object(s.d)(),r=null===(e=Object(i.a)(a,1)[0].get(be))||void 0===e?void 0:e.toLowerCase(),n=Object(o.useState)(c()),l=Object(i.a)(n,2),u=l[0],d=l[1],j=Object(o.useState)(u.length),b=Object(i.a)(j,2),O=b[0],p=b[1],x=r?"result":"item",v="".concat(O," ").concat(x).concat(1===O?"":"s"),_=m()("favorites__count",{"favorites__count--query":r});return Object(o.useEffect)((function(){var e;e=r?c().filter((function(e){return e.name.toLowerCase().includes(r)})):c(),d(e),p(e.length)}),[r,O]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(Z.Provider,{value:{increment:function(){return p((function(e){return e+1}))},decrement:function(){return p((function(e){return e-1}))}},children:[Object(h.jsx)(I,{hasSearch:!0,currentPage:"favourites",favoritesCount:O}),Object(h.jsx)("main",{className:"favorites",children:O?Object(h.jsxs)(h.Fragment,{children:[!r&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(pe,{path:[{text:"Favourites"}]}),Object(h.jsx)(L,{extraClassName:"favorites__title",children:"Favourites"})]}),Object(h.jsx)(ve,{countText:v,extraClasses:_}),Object(h.jsx)(fe,{products:u})]}):Object(h.jsx)("div",{className:"favorites__no-search",children:r?Object(h.jsx)(xe,{}):Object(h.jsx)(Ne,{categoryName:"Favorites"})})})]}),Object(h.jsx)(f,{})]})},Fe=function(e){var t=e.extraClass,c=m()("back",t),a=Object(l.o)();return Object(h.jsxs)("button",{className:c,type:"button",onClick:function(){return a(-1)},"data-cy":"backButton",children:[Object(h.jsx)("img",{className:"back__image",src:"img/arrows/arrow-left.svg",alt:"Arrow left"}),Object(h.jsx)("p",{className:"back__text",children:"Back"})]})},Te=function(e){var t=e.productInCart,c=t.product,a=t.quantity,s=e.onRemoveClick,r=e.onQuantityClick,n=c.imageUrl,o=c.name,i=c.discountedPrice,l=c.id,u="$".concat(+(i*a).toFixed(2));return Object(h.jsxs)("li",{className:"cart-item",children:[Object(h.jsx)("button",{type:"button",className:"cart-item__remove-button","data-cy":"cartDeleteButton",onClick:function(){return s(l)},children:Object(h.jsx)("img",{className:"cart-item__remove-icon",src:"img/cart/close.svg",alt:"Delete item"})}),Object(h.jsx)("img",{className:"cart-item__product-image",src:n,alt:"Product"}),Object(h.jsx)("p",{className:"cart-item__product-name",children:o}),Object(h.jsx)("button",{className:"cart-item__minus",type:"button",disabled:1===a,onClick:function(){return r(l,!0)},children:"-"}),Object(h.jsx)("div",{"data-cy":"productQauntity",className:"cart-item__quantity",children:a}),Object(h.jsx)("button",{className:"cart-item__plus",type:"button",onClick:function(){return r(l,!1)},children:"+"}),Object(h.jsx)("span",{className:"cart-item__total-price",children:u})]})},Be=function(e){var t=e.productsInCart,c=e.onRemoveClick,a=e.onQuantityClick;return Object(h.jsx)("ul",{className:"cart-items",children:t.map((function(e){var t=e.product.id;return Object(h.jsx)(Te,{productInCart:e,onRemoveClick:c,onQuantityClick:a},t)}))})},Me=function(){var e=K(X),t=Object(i.a)(e,5),c=t[0],a=t[1],s=t[3],r=t[4],n=Object(o.useState)(!1),l=Object(i.a)(n,2),u=l[0],d=l[1],j=c(),b=m()("button","button--big",{"button--clicked":u}),O=m()("button__text",{"button__text--clicked":u}),p=j.reduce((function(e,t){var c=t.quantity;return e+t.product.discountedPrice*c}),0),x="$".concat(+p.toFixed(2)),v="Total for ".concat(r," item").concat(1===r?"":"s"),_=0===s;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(I,{hasSearch:!1,hasNav:!1,hasFavorites:!1,cartCount:r}),Object(h.jsxs)("main",{className:"cart",children:[Object(h.jsx)(Fe,{extraClass:"cart__back"}),_?Object(h.jsx)(L,{extraClassName:"cart__title",children:"Your cart is empty"}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(L,{extraClassName:"cart__title",children:"Cart"}),Object(h.jsxs)("div",{className:"cart__content",children:[Object(h.jsx)("div",{className:"cart__items",children:Object(h.jsx)(Be,{productsInCart:j,onRemoveClick:function(e){a(j.filter((function(t){return t.product.id!==e})))},onQuantityClick:function(e,t){a(j.map((function(c){var a=Object(q.a)({},c),s=c.product,r=c.quantity;return s.id===e&&(t?r>1&&(a.quantity-=1):a.quantity+=1),Object(q.a)({},a)})))}})}),Object(h.jsxs)("div",{className:"cart__summary-wrapper",children:[Object(h.jsxs)("div",{className:"cart__summary",children:[Object(h.jsx)(L,{extraClassName:"cart__total-price",children:x}),Object(h.jsx)("p",{className:"cart__count-text",children:v}),Object(h.jsx)(ee,{buttonClasses:b,onClick:function(){d(!0)},textClasses:O,children:"Checkout"})]}),u&&Object(h.jsx)("p",{children:"We are sorry, but this feature is not implemented yet"})]})]})]})]}),Object(h.jsx)(f,{hasTopNav:!1})]})},Ae=function(e){var t=e.imageSource,c=e.isSelected,a=e.index,s=e.onClick,r=m()("small-photo",{"small-photo--selected":c});return Object(h.jsx)("button",{type:"button",className:r,onClick:function(){return s(a)},children:Object(h.jsx)("img",{className:"small-photo__picture",src:t,alt:"Small product"})})},Ie=function(e){var t=e.children;return Object(h.jsx)("h2",{className:"subtitle",children:t})},Le=function(){var e,t,c=Object(o.useState)(!1),a=Object(i.a)(c,2),s=a[0],r=a[1],n=Object(o.useState)(null),j=Object(i.a)(n,2),b=j[0],O=j[1],p=Object(o.useState)(null),x=Object(i.a)(p,2),v=x[0],C=x[1],y=Object(o.useState)(0),k=Object(i.a)(y,2),w=k[0],P=k[1],S=Object(l.q)().productId,F=(null===b||void 0===b?void 0:b.type)||E.all,T=[{name:"Screen",value:d((null===b||void 0===b?void 0:b.screen)||"")},{name:"Resolution",value:(null===v||void 0===v?void 0:v.display.screenResolution)||""},{name:"Processor",value:(null===v||void 0===v?void 0:v.hardware.cpu)||""},{name:"RAM",value:u((null===b||void 0===b?void 0:b.ram)||"")}],B=[].concat(T,[{name:"Built in memory",value:u((null===v||void 0===v?void 0:v.storage.flash)||"")},{name:"Camera",value:(null===v||void 0===v?void 0:v.camera.primary)||""},{name:"Cell",value:(null===v||void 0===v?void 0:v.connectivity.cell)||""}]),M="$".concat(null===b||void 0===b?void 0:b.discountedPrice);switch(F){case E.phone:e="Phones",t=_;break;case E.tablet:e="Tablets",t=g;break;case E.accessories:e="Accessories",t=N;break;default:e="",t=""}var A="ID: ".concat(function(e){switch(e){case"motorola-atrix-4g":return 802390;case"samsung-gem":return 802391;case"dell-venue":return 802392;case"nexus-s":return 802393;case"lg-axis":return 802394;case"samsung-showcase-a-galaxy-s-phone":return 802395;case"droid-2-global-by-motorola":return 802396;case"droid-pro-by-motorola":return 802397;case"motorola-bravo-with-motoblur":return 802398;case"motorola-defy-with-motoblur":case"t-mobile-mytouch-4g":return 802399;case"samsung-mesmerize-a-galaxy-s-phone":return 802400;case"sanyo-zio":return 802401;case"samsung-transform":return 802402;case"t-mobile-g2":return 802403;case"motorola-charm-with-motoblur":return 802404;case"motorola-xoom-with-wi-fi":return 802405;case"motorola-xoom":return 802406;case"dell-streak-7":return 802407;case"samsung-galaxy-tab":return 802408;default:return 0}}(null===b||void 0===b?void 0:b.id)),R=[{text:e,link:t},{text:(null===b||void 0===b?void 0:b.name)||""}],q=m()("product-details__specs","product-details__specs--up"),D=m()("product-details__specs","product-details__specs--down"),Q=function(e){return P(e)};return Object(o.useEffect)((function(){return $().then((function(e){O(e.find((function(e){return e.id===S}))||null)})),function(e){if(!e)throw new Error("Product not found");var t="https://mate-academy.github.io/react_phone-catalog/api/products/".concat(e,".json");return fetch(t).then((function(e){return e.json()}))}(S).then(C).catch((function(){return r(!0)})),function(){return Q(0)}}),[S]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(I,{activeLink:F,hasSearch:!1}),null!==b&&null!==v?Object(h.jsxs)("main",{className:"product-details",children:[Object(h.jsx)(pe,{path:R}),Object(h.jsx)(Fe,{extraClass:"product-details__back"}),Object(h.jsx)(L,{extraClassName:"product-details__title",children:b.name}),Object(h.jsxs)("section",{className:"product-details__content-up",children:[Object(h.jsx)("ul",{className:"product-details__small-photos",children:v.images.map((function(e,t){var c=t===w;return Object(h.jsx)("li",{children:Object(h.jsx)(Ae,{isSelected:c,imageSource:e,index:t,onClick:Q})},e)}))}),Object(h.jsx)("img",{className:"product-details__big-photo",src:v.images[w],alt:"Selected"}),Object(h.jsxs)("div",{className:"product-details__up-details",children:[Object(h.jsxs)("div",{className:"product-details__prices",children:[Object(h.jsx)(L,{children:M}),!!b.discount&&Object(h.jsx)(Y,{children:b.price})]}),Object(h.jsx)("div",{className:"product-details__buttons",children:Object(h.jsx)(te,{product:b,areBig:!0})}),Object(h.jsx)(se,{isBig:!1,listClasses:q,specs:T})]}),Object(h.jsx)("p",{className:"product-details__id",children:A})]}),Object(h.jsxs)("section",{className:"product-details__content-down",children:[Object(h.jsxs)("div",{className:"product-details__content-down-left",children:[Object(h.jsx)(Ie,{children:"About"}),Object(h.jsx)("article",{className:"product-details__description","data-cy":"productDescription",children:v.description})]}),Object(h.jsxs)("div",{className:"product-details__content-down-right",children:[Object(h.jsx)(Ie,{children:"Tech-specs"}),Object(h.jsx)(se,{isBig:!0,listClasses:D,specs:B})]})]}),Object(h.jsx)(ue,{type:ae.random,withoutId:b.id,children:"You may also like"})]}):!s&&Object(h.jsx)(ge,{}),s&&Object(h.jsx)("main",{className:"product-details__not-found",children:Object(h.jsx)(L,{children:"Phone was not found"})}),Object(h.jsx)(f,{})]})},Re=function(){return Object(h.jsxs)("main",{className:"not-found",children:[Object(h.jsx)(L,{children:"Page not found"}),Object(h.jsx)(s.b,{to:"/",children:"Go to home"})]})};function qe(e,t){return window.location.hash.includes(t)?e:-1}var De=function(){var e=Object(o.useContext)(p).collapseMenu,t=K(X),c=Object(i.a)(t,5)[4],a=K(V),s=Object(i.a)(a,4)[3],r=qe(c,y),n=qe(s,C);return Object(h.jsx)("div",{className:"drop-down-menu",children:Object(h.jsxs)("div",{className:"drop-down-menu__content",children:[Object(h.jsx)("button",{onClick:e,type:"button",className:"drop-down-menu__close",children:Object(h.jsx)("img",{src:"img/header/search/close.svg",alt:"Clear search"})}),Object(h.jsx)(v,{}),Object(h.jsx)(T,{}),Object(h.jsx)(F,{count:n}),Object(h.jsx)(S,{count:r}),Object(h.jsx)(x,{})]})})},Qe=function(){var e=Object(o.useState)(!1),t=Object(i.a)(e,2),c=t[0],a=t[1],s="".concat(k,"/:productId");return Object(h.jsx)("div",{className:"app",children:Object(h.jsx)(p.Provider,{value:{collapseMenu:function(){return a(!1)},expandMenu:function(){return a(!0)}},children:Object(h.jsxs)(l.c,{children:[Object(h.jsx)(l.a,{path:"/",element:c?Object(h.jsx)(De,{}):Object(h.jsx)(je,{})}),Object(h.jsx)(l.a,{path:_,element:c?Object(h.jsx)(De,{}):Object(h.jsx)(we,{})}),Object(h.jsx)(l.a,{path:g,element:c?Object(h.jsx)(De,{}):Object(h.jsx)(Pe,{})}),Object(h.jsx)(l.a,{path:N,element:c?Object(h.jsx)(De,{}):Object(h.jsx)(Se,{})}),Object(h.jsx)(l.a,{path:C,element:c?Object(h.jsx)(De,{}):Object(h.jsx)(Ee,{})}),Object(h.jsx)(l.a,{path:y,element:c?Object(h.jsx)(De,{}):Object(h.jsx)(Me,{})}),Object(h.jsx)(l.a,{path:s,element:c?Object(h.jsx)(De,{}):Object(h.jsx)(Le,{})}),Object(h.jsx)(l.a,{path:"/*",element:Object(h.jsx)(Re,{})})]})})})};n.a.render(Object(h.jsx)(s.a,{children:Object(h.jsx)(o.StrictMode,{children:Object(h.jsx)(Qe,{})})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.5aa24b0d.chunk.js.map