(this["webpackJsonpreact_phone-catalog"]=this["webpackJsonpreact_phone-catalog"]||[]).push([[0],{30:function(e,t,c){},33:function(e,t,c){"use strict";c.r(t);var a,s=c(7),r=c(25),n=c.n(r),o=c(1),i=c(3),l=(c(30),c(4)),u=c(6),d=c.n(u);!function(e){e.left="left",e.right="right",e.top="up"}(a||(a={}));var j=c(0),b=function(e){var t=e.direction,c=e.buttonExtraClass,a=e.onClick,s=e.disabled,r=e.dataCy,n="img/arrows/arrow-".concat(t).concat(s?"-disabled":"",".svg"),o="Arrow ".concat(t),i=d()("arrow",{"arrow--disabled":s},c);return Object(j.jsx)("button",{className:i,type:"button",onClick:a,disabled:s,"data-cy":r,children:Object(j.jsx)("img",{className:"arrow__img",src:n,alt:o})})};b.defaultProps={buttonExtraClass:"",disabled:!1,dataCy:""};var m=function(e){var t=e.imageClasses;return Object(j.jsx)("img",{src:"img/logo.svg",alt:"Logo",className:t})},h=function(e){var t=e.hasTopNav,c=void 0===t||t,s=Object(o.useState)(!1),r=Object(l.a)(s,2)[1],n=d()("home__footer","footer",{"footer--bottom":document.body.clientHeight+80<window.innerHeight}),i=function(){return window.scrollTo(1440,0)};return Object(o.useEffect)((function(){r(!0)}),[]),Object(j.jsxs)("footer",{className:n,children:[Object(j.jsxs)("div",{className:"footer__left",children:[Object(j.jsx)(m,{imageClasses:"footer__logo logo"}),Object(j.jsxs)("div",{className:"footer__links",children:[Object(j.jsx)("a",{className:"footer__link",href:"https://github.com/AmadeuszAndroid/react_phone-catalog/tree/develop",children:"Github"}),Object(j.jsx)("a",{className:"footer__link",href:"#/",children:"Contacts"}),Object(j.jsx)("a",{className:"footer__link",href:"#/",children:"rights"})]})]}),c&&Object(j.jsxs)("nav",{className:"footer__top-nav",children:[Object(j.jsx)("button",{className:"footer__top-link-text",type:"button",onClick:i,children:"Back to top"}),Object(j.jsx)(b,{direction:a.top,onClick:i})]})]})};h.defaultProps={hasTopNav:!0};var p="/phones",O="/tablets",x="/accessories",v="/favorites",_="/cart",g="/product",f=function(e){var t=e.count;return Object(j.jsx)("div",{className:"image-link__counter counter",children:Object(j.jsx)("span",{className:"counter__text",children:t})})},N=function(e){var t=e.link,c=e.imageSource,a=e.alternativeName,r=e.itemsCount;return Object(j.jsxs)(s.c,{className:"image-link",to:t,children:[Object(j.jsx)("img",{className:"image-link__icon",src:c,alt:a}),-1!==r&&Object(j.jsx)(f,{count:r})]})},y=function(e){var t=e.count,c=void 0===t?-1:t;return Object(j.jsx)(N,{alternativeName:"Cart",imageSource:"img/header/cart.svg",link:_,itemsCount:c})};y.defaultProps={count:-1};var C,k=function(e){var t=e.count,c=void 0===t?-1:t;return Object(j.jsx)(N,{alternativeName:"Favourites",imageSource:"img/header/favourites.svg",link:v,itemsCount:c})};k.defaultProps={count:-1},function(e){e.phone="phone",e.tablet="tablet",e.accessories="accessory",e.all="all"}(C||(C={}));var w=function(e){var t=e.activeCategory,c=d()("nav__link",{active:t===C.phone}),a=d()("nav__link",{active:t===C.tablet}),r=d()("nav__link",{active:t===C.accessories});return Object(j.jsxs)("nav",{className:"nav",children:[Object(j.jsx)(s.c,{className:"nav__link",to:"/",children:"home"}),Object(j.jsx)(s.c,{className:c,to:p,children:"phones"}),Object(j.jsx)(s.c,{className:a,to:O,children:"tablets"}),Object(j.jsx)(s.c,{className:r,to:x,children:"accessories"})]})};w.defaultProps={activeCategory:-1};var P="query",S="page",F=function(e){var t,c=e.currentPage,a=Object(s.d)(),r=Object(l.a)(a,2),n=r[0],i=r[1],u=Object(o.useRef)(null),d=n.get(P),b="Search in ".concat(c,"..."),m=function(){n.delete(P),i(n)};return Object(o.useEffect)((function(){var e=u.current;null!==e&&(e.value=d||"")}),[d]),Object(j.jsxs)("div",{className:"search",children:[n.get(P)?Object(j.jsx)("button",{onClick:m,type:"button",className:"search__close",children:Object(j.jsx)("img",{src:"img/header/search/close.svg",alt:"Clear search"})}):Object(j.jsx)("label",{className:"search__label",htmlFor:"search",children:Object(j.jsx)("img",{src:"img/header/search/search.svg",alt:"Search"})}),Object(j.jsx)("input",{id:"search",className:"search__input",type:"text",placeholder:b,onChange:function(e){var c=e.target.value;clearTimeout(t),t=+setTimeout((function(){c?(n.set(P,c),null!==n.get(S)&&n.set(S,"1"),i(n)):m()}),1e3)},ref:u})]})},T=function(e){var t=e.hasSearch,c=e.currentPage,a=void 0===c?"":c,s=e.favoritesCount,r=e.cartCount,n=e.hasNav,o=e.hasFavorites,i=e.activeCategory;return Object(j.jsxs)("header",{id:"header",className:"header",children:[Object(j.jsxs)("div",{className:"header__part header__part--left",children:[Object(j.jsx)(m,{imageClasses:"header__logo logo"}),n&&Object(j.jsx)(w,{activeCategory:i})]}),Object(j.jsxs)("div",{className:"header__part",children:[t&&Object(j.jsx)(F,{currentPage:a}),o&&Object(j.jsx)(k,{count:s}),Object(j.jsx)(y,{count:r})]})]})};T.defaultProps={favoritesCount:-1,cartCount:-1,currentPage:"",hasNav:!0,hasFavorites:!0,activeCategory:C.all};var A=function(e){var t=e.children,c=e.extraClassName,a=d()("title",c);return Object(j.jsx)("h1",{className:a,children:t})};A.defaultProps={extraClassName:""};var B=function(e){var t=e.name,c=e.imagePath,a=e.productsCount,s="".concat(a," models");return Object(j.jsxs)("div",{className:"category",children:[Object(j.jsx)("img",{className:"category__image",src:c,alt:t}),Object(j.jsx)("h3",{className:"category__name",children:t}),Object(j.jsx)("p",{className:"category__count",children:s})]})},E=c(15),I="https://mate-academy.github.io/react_phone-catalog/api/products.json";function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C.all;return fetch(I).then((function(e){return e.json()})).then((function(t){var c=t.map((function(e){var t=e.price,c=t*e.discount/100;return Object(E.a)(Object(E.a)({},e),{},{discountedPrice:+(t-c).toFixed(2)})}));return e===C.all?c:c.filter((function(t){return t.type===e}))}))}var R,M=function(){var e=Object(o.useState)([]),t=Object(l.a)(e,2),c=t[0],a=t[1];function r(e){return c.filter((function(t){return t.type===e})).length}var n=r(C.phone),i=r(C.tablet),u=r(C.accessories);return Object(o.useEffect)((function(){q().then(a)}),[]),Object(j.jsxs)("div",{className:"home__categories shop-by-category",children:[Object(j.jsx)(A,{children:"Shop by category"}),Object(j.jsxs)("div",{"data-cy":"categoryLinksContainer",className:"shop-by-category__categories",children:[Object(j.jsx)(s.b,{className:"shop-by-category__link",to:"phones",children:Object(j.jsx)(B,{imagePath:"img/home/categories/mobile-phones.png",name:"Mobile phones",productsCount:n})}),Object(j.jsx)(s.b,{className:"shop-by-category__link",to:"tablets",children:Object(j.jsx)(B,{imagePath:"img/home/categories/tablets.png",name:"Tablets",productsCount:i})}),Object(j.jsx)(s.b,{className:"shop-by-category__link",to:"accessories",children:Object(j.jsx)(B,{imagePath:"img/home/categories/accessories.png",name:"Accessories",productsCount:u})})]})]})};!function(e){e[e.phones=0]="phones",e[e.tablets=1]="tablets",e[e.accessories=2]="accessories"}(R||(R={}));var L=function(){var e,t=Object(o.useState)(0),c=Object(l.a)(t,2),s=c[0],r=c[1];switch(s){case R.tablets:e="tablets";break;case R.accessories:e="accessories";break;case R.phones:default:e="phones"}var n="img/home/slider/banner-".concat(e,".png"),i=d()("categories-slider__bar",{"categories-slider__bar--visible":0===s}),u=d()("categories-slider__bar",{"categories-slider__bar--visible":1===s}),m=d()("categories-slider__bar",{"categories-slider__bar--visible":2===s}),h=function(){var e;e=s===R.accessories?R.phones:s+1,r(e)};return Object(o.useEffect)((function(){var e=setInterval((function(){return h()}),5e3);return function(){return clearInterval(e)}}),[s]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"home__categories-slider categories-slider",children:[Object(j.jsx)(b,{direction:a.left,buttonExtraClass:"categories-slider__nav",onClick:function(){var e;e=s===R.phones?R.accessories:s-1,r(e)}}),Object(j.jsx)("img",{className:"categories-slider__image",src:n,alt:"Banner"}),Object(j.jsx)(b,{direction:a.right,buttonExtraClass:"categories-slider__nav",onClick:h})]}),Object(j.jsxs)("div",{className:"categories-slider__bars",children:[Object(j.jsx)("div",{className:i}),Object(j.jsx)("div",{className:u}),Object(j.jsx)("div",{className:m})]})]})},D=function(e){var t=e.name,c=e.value,a=e.isBig,s=d()("product-spec__name",{"product-spec__name--big":a}),r=d()("product-spec__value",{"product-spec__value--big":a});return Object(j.jsxs)("div",{className:"product-spec",children:[Object(j.jsx)("div",{className:s,children:t}),Object(j.jsx)("div",{className:r,children:c})]})};D.defaultProps={isBig:!1};var Q=function(e){var t=e.children,c="$".concat(t);return Object(j.jsx)("h2",{className:"old-price",children:c})},$=c(10);function J(e){var t=function(){var t=localStorage.getItem(e);return"string"===typeof t?JSON.parse(t):[]},c=Object(o.useState)(t),a=Object(l.a)(c,2),s=a[0],r=a[1];return[t,function(t){r(t),localStorage.setItem(e,JSON.stringify(t))},function(e){return s.some((function(t){return"id"in t?t.id===e:t.product.id===e}))},s.length]}var z="cart",H=Object(o.createContext)({increment:function(){},decrement:function(){}}),U=function(e){var t=e.product,c=e.areBig,a=J(z),s=Object(l.a)(a,3),r=s[0],n=s[1],i=s[2],u=J("favorites"),b=Object(l.a)(u,3),m=b[0],h=b[1],p=b[2],O=Object(o.useContext)(H),x=O.increment,v=O.decrement,_=t.id,g=i(_),f=d()("product-buttons__cart",{"product-buttons__cart--clicked":g,"product-buttons__cart--big":c}),N=d()("product-buttons__cart-text",{"product-buttons__cart-text--clicked":g}),y=g?"Added to cart":"Add to cart",C=d()("product-buttons__favorites",{"product-buttons__favorites--big":c}),k=p(_)?"img/favorites/heart-selected.svg":"img/favorites/heart.svg";return Object(j.jsxs)("div",{className:"product-buttons",children:[Object(j.jsx)("button",{className:f,type:"button",onClick:function(){if(!i(_)){var e={product:t,quantity:1};n([].concat(Object($.a)(r()),[e]))}},children:Object(j.jsx)("div",{className:N,children:y})}),Object(j.jsx)("button",{className:C,type:"button",onClick:function(){p(_)?(h(Object($.a)(m().filter((function(e){return"id"in e?e.id!==_:e.product.id!==_})))),v()):(h([].concat(Object($.a)(m()),[t])),x())},"data-cy":"addToFavorite",children:Object(j.jsx)("img",{className:"product-buttons__heart",src:k,alt:"Add to favorites"})})]})};function G(e){return"".concat(e.split("MB")[0]," ","MB")}function W(e){return e.replace(" inches","\u201d")}U.defaultProps={areBig:!1};var Y,K=function(e){var t=e.product,c=t.imageUrl,a=t.name,r=t.price,n=t.discountedPrice,o=t.screen,i=t.capacity,l=t.ram,u=t.id,d="$".concat(n),b=W(o),m=G(i),h=G(l),p="".concat(g,"/").concat(u);return Object(j.jsxs)("li",{className:"product-card",children:[Object(j.jsxs)(s.b,{className:"product-card__link",to:p,children:[Object(j.jsx)("img",{className:"product-card__image",src:c,alt:"Product"}),Object(j.jsx)("p",{className:"product-card__name",children:a}),Object(j.jsxs)("div",{className:"product-card__prices",children:[Object(j.jsx)("h2",{className:"product-card__current-price",children:d}),n<r&&Object(j.jsx)(Q,{children:r})]}),Object(j.jsxs)("div",{className:"product-card__details",children:[o&&Object(j.jsx)(D,{name:"Screen",value:b}),i&&Object(j.jsx)(D,{name:"Capacity",value:m}),l&&Object(j.jsx)(D,{name:"Ram",value:h})]})]}),Object(j.jsx)("div",{className:"product-card__buttons",children:Object(j.jsx)(U,{product:t})})]})},V=function(e){var t=e.products;return Object(j.jsx)("ul",{"data-cy":"cardsContainer",className:"products-slider__cards",children:t.map((function(e){return Object(j.jsx)(K,{product:e},e.id)}))})};!function(e){e[e.hotProducts=0]="hotProducts",e[e.newProducts=1]="newProducts"}(Y||(Y={}));var X,Z=function(e){var t=e.title,c=e.type,s=Object(o.useState)([]),r=Object(l.a)(s,2),n=r[0],i=r[1],u=Object(o.useState)(0),d=Object(l.a)(u,2),m=d[0],h=d[1],p=n.slice(m,4+m),O=0===m,x=m+4===n.length;function v(e){return e.price*e.discount/100}return Object(o.useEffect)((function(){q().then((function(e){var t;switch(c){case Y.newProducts:t=e.filter((function(e){return 0===e.discount})).sort((function(e,t){return e.age-t.age}));break;case Y.hotProducts:default:t=e.filter((function(e){return e.discount>0})).sort((function(e,t){return v(t)-v(e)}))}i(t)}))}),[]),Object(j.jsxs)("div",{className:"home__products-slider products-slider",children:[Object(j.jsxs)("div",{className:"products-slider__header",children:[Object(j.jsx)(A,{children:t}),Object(j.jsxs)("div",{className:"cardsContainer__arrows",children:[Object(j.jsx)(b,{direction:a.left,onClick:function(){m>0&&h(m-1)},disabled:O}),Object(j.jsx)(b,{direction:a.right,onClick:function(){m+4<n.length&&h(m+1)},disabled:x})]})]}),Object(j.jsx)(V,{products:p})]})},ee=function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(T,{hasSearch:!1,currentPage:"home"}),Object(j.jsxs)("main",{className:"home",children:[Object(j.jsx)(L,{}),Object(j.jsx)(Z,{title:"Hot prices",type:Y.hotProducts}),Object(j.jsx)(M,{}),Object(j.jsx)(Z,{title:"Brand new models",type:Y.newProducts})]}),Object(j.jsx)(h,{})]})};!function(e){e.features="dropdown-features",e.pages="dropdown-pages"}(X||(X={}));var te="query",ce="page",ae="perPage",se="sort",re=function(e){var t=e.path;return Object(j.jsxs)("div",{"data-cy":"breadCrumbs",className:"products__breadcrumbs breadcrumbs",children:[Object(j.jsx)(s.b,{to:"/",children:Object(j.jsx)("img",{className:"breadcrumbs__image",src:"img/home-breadcrumbs.svg",alt:"home"})}),t.map((function(e,c){var a=e.link,r=e.text;return Object(j.jsxs)(o.Fragment,{children:[Object(j.jsx)("img",{className:"breadcrumbs__image",src:"img/arrows/arrow-right-breadcrumbs.svg",alt:"Arrow right"}),c===t.length-1?Object(j.jsx)("p",{className:"breadcrumbs__text",children:r}):Object(j.jsx)(s.b,{to:a||"",children:Object(j.jsx)("span",{className:"breadcrumbs__text",children:r})})]},a+r)}))]})},ne=function(){return Object(j.jsx)(A,{children:"No search products found"})},oe=function(e){var t=e.countText,c=e.extraClasses,a=d()("products-count",c);return Object(j.jsx)("p",{className:a,children:t})},ie=function(e){var t=e.products;return Object(j.jsx)("ul",{className:"products__list products-list","data-cy":"productList",children:t.map((function(e){return Object(j.jsx)(K,{product:e},e.id)}))})},le=function(e){var t,c=e.id,a=e.description,r=e.options,n=Object(o.useState)(!1),i=Object(l.a)(n,2),u=i[0],b=i[1],m=Object(s.d)(),h=Object(l.a)(m,2),p=h[0],O=h[1],x=d()("dropdown__select",{"dropdown__select--big":c===X.features,"dropdown__select--small":c===X.pages}),v=d()("dropdown__arrow-icon",{"dropdown__arrow-icon--big":c===X.features,"dropdown__arrow-icon--small":c===X.pages}),_=d()("dropdown__list",{"dropdown__list--big":c===X.features,"dropdown__list--small":c===X.pages}),g="img/arrows/arrow-".concat(u?"up":"down","-dropdown.svg"),f=c===X.features?se:ae,N=p.get(f),y=null===(t=r.find((function(e){return e.value===N})))||void 0===t?void 0:t.text;return Object(o.useEffect)((function(){null===p.get(f)&&(p.set(f,r[0].value),O(p))})),Object(j.jsxs)("div",{className:"dropdown",children:[Object(j.jsx)("p",{className:"dropdown__title",children:a}),Object(j.jsxs)("button",{className:x,type:"button",onClick:function(){b(!u)},onBlur:function(){return b(!1)},children:[Object(j.jsx)("div",{className:"dropdown__select-content",children:Object(j.jsx)("p",{className:"dropdown__select-text",children:y})}),Object(j.jsx)("img",{className:v,src:g,alt:"Dropdown arrow"})]}),u&&Object(j.jsx)("div",{className:_,children:r.map((function(e){var t=e.text,a=e.value;return Object(j.jsx)("button",{className:"dropdown__option",value:a,type:"button",onMouseDown:function(){return function(e){b(!1);var t=c===X.features?se:ae;p.set(t,e),t===ae&&("all"!==e?p.set(ce,"1"):p.delete(ce)),O(p)}(a)},children:t},t)}))})]})},ue=function(){return Object(j.jsx)("div",{className:"loader",children:Object(j.jsx)("div",{className:"loader__content"})})},de=function(e){var t=e.categoryName,c="".concat(t," not found");return Object(j.jsx)(A,{children:c})},je=function(e){var t=e.pageNumber,c=e.isSelected,a=e.onClick,s=d()("page",{page__active:c});return Object(j.jsx)("button",{type:"button",className:s,onClick:function(){return a(t)},disabled:c,children:t})},be=function(e){for(var t=e.total,c=e.perPage,s=e.currentPage,r=void 0===s?1:s,n=e.onPageChange,o=[1],i=2;i<=Math.ceil(t/c);i+=1)o.push(i);return Object(j.jsxs)("div",{className:"products__pagination pagination","data-cy":"pagination",children:[Object(j.jsx)(b,{direction:a.left,onClick:function(){return n(r-1)},disabled:1===r,dataCy:"paginationLeft"}),Object(j.jsx)("ul",{className:"pagination__pages",children:o.map((function(e){return Object(j.jsx)("li",{children:Object(j.jsx)(je,{pageNumber:e,isSelected:e===r,onClick:n})},Date.now()+e)}))}),Object(j.jsx)(b,{direction:a.right,onClick:function(){return n(r+1)},disabled:r===o.length,dataCy:"paginationRight"})]})};be.defaultProps={currentPage:1};var me=function(e){var t,c,a,r,n,i,u=e.categoryType,b=Object(o.useState)(null),m=Object(l.a)(b,2),p=m[0],O=m[1],x=Object(o.useState)(0),v=Object(l.a)(x,2),_=v[0],g=v[1],f=Object(o.useState)(0),N=Object(l.a)(f,2),y=N[0],k=N[1],w=Object(s.d)(),P=Object(l.a)(w,2),S=P[0],F=P[1],B=null===(t=S.get(te))||void 0===t?void 0:t.toLowerCase(),E=S.get(se),I=S.get(ae),R=+(S.get(ce)||1),M=(null===p||void 0===p?void 0:p.length)||0;switch(u){case C.tablet:c="tablets",a="Tablets",r=q(C.tablet),n="Tablets";break;case C.accessories:c="accesories",a="Accessories",r=q(C.accessories),n="Accessories";break;default:case C.phone:c="phones",a="Phones",r=q(C.phone),n="Mobile phones"}var L=["age","name","price"],D=["all","4","8","16"],Q=_>=+D[1],J=[{text:"Newest",value:L[0]},{text:"Alphabetically",value:L[1]},{text:"Cheapest",value:L[2]}],z=d()("products__count",{"products__count--query":B}),H=D.map((function(e){return{text:e,value:e}}));i=I===D[0]?M:+(I||M);var U,G=[{text:a}];U=B?"".concat(_," result").concat(1===_?"":"s"):"".concat(_," model").concat(1===_?"":"s");var W=I!==D[0]&&_>=i&&Q,Y=null===S.get(ce)||Number.isInteger(R)&&R>0&&R<=Math.ceil(_/i),K=!_&&B||E&&!L.includes(E)||I&&!D.includes(I)||!Y;return Object(o.useEffect)((function(){r.then((function(e){k(e.length);var t=Object($.a)(e);if(B&&(t=e.filter((function(e){return e.name.toLowerCase().includes(B)}))),g(t.length),t.sort((function(e,t){switch(E){case"price":return e.price-t.price;default:case"name":return e.name.localeCompare(t.name);case"age":return e.age-t.age}})),I&&I!==D[0]){var c=(R-1)*i,a=R*i-1;O(t.filter((function(e,t){return t>=c&&t<=a})))}else O(t)}))}),[B,E,R,I]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(T,{hasSearch:!0,currentPage:c}),null===p?Object(j.jsx)(ue,{}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("main",{className:"products",children:[!B&&Object(j.jsx)(re,{path:G}),K||!y?Object(j.jsx)("div",{className:"products__no-results",children:y?Object(j.jsx)(ne,{}):Object(j.jsx)(de,{categoryName:n})}):Object(j.jsxs)(j.Fragment,{children:[!B&&Object(j.jsx)(A,{extraClassName:"products__title",children:n}),Object(j.jsx)(oe,{countText:U,extraClasses:z}),Q&&Object(j.jsxs)("div",{className:"products__filters",children:[Object(j.jsx)(le,{id:X.features,description:"Sort by",options:J}),Object(j.jsx)(le,{id:X.pages,description:"Items on page",options:H})]}),M&&Object(j.jsx)(ie,{products:p}),W&&Object(j.jsx)(be,{onPageChange:function(e){S.set(ce,e.toString()),F(S)},perPage:i,currentPage:R,total:_})]})]}),Object(j.jsx)(h,{})]})]})},he=function(){return Object(j.jsx)(me,{categoryType:C.phone})},pe=function(){return Object(j.jsx)(me,{categoryType:C.tablet})},Oe=function(){return Object(j.jsx)(me,{categoryType:C.accessories})},xe=function(){var e,t=J("favorites"),c=Object(l.a)(t,1)[0],a=Object(s.d)(),r=null===(e=Object(l.a)(a,1)[0].get(te))||void 0===e?void 0:e.toLowerCase(),n=Object(o.useState)(c()),i=Object(l.a)(n,2),u=i[0],b=i[1],m=Object(o.useState)(u.length),p=Object(l.a)(m,2),O=p[0],x=p[1],v=r?"result":"item",_="".concat(O," ").concat(v).concat(1===O?"":"s"),g=d()("favorites__count",{"favorites__count--query":r});return Object(o.useEffect)((function(){var e;e=r?c().filter((function(e){return e.name.toLowerCase().includes(r)})):c(),b(e),x(e.length)}),[r,O]),Object(j.jsxs)(H.Provider,{value:{increment:function(){return x((function(e){return e+1}))},decrement:function(){return x((function(e){return e-1}))}},children:[Object(j.jsx)(T,{hasSearch:!0,currentPage:"favourites",favoritesCount:O}),Object(j.jsx)("main",{className:"favorites",children:O?Object(j.jsxs)(j.Fragment,{children:[!r&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(re,{path:[{text:"Favourites"}]}),Object(j.jsx)(A,{extraClassName:"favorites__title",children:"Favourites"})]}),Object(j.jsx)(oe,{countText:_,extraClasses:g}),Object(j.jsx)(ie,{products:u})]}):Object(j.jsx)("div",{className:"favorites__no-search",children:r?Object(j.jsx)(ne,{}):Object(j.jsx)(de,{categoryName:"Favorites"})})}),Object(j.jsx)(h,{})]})},ve=function(e){var t=e.extraClass,c=d()("back",t),a=Object(i.o)();return Object(j.jsxs)("button",{className:c,type:"button",onClick:function(){return a(-1)},"data-cy":"backButton",children:[Object(j.jsx)("img",{className:"back__image",src:"img/arrows/arrow-left.svg",alt:"Arrow left"}),Object(j.jsx)("p",{className:"back__text",children:"Back"})]})},_e=function(e){var t=e.productInCart,c=t.product,a=t.quantity,s=e.onRemoveClick,r=e.onQuantityClick,n=c.imageUrl,o=c.name,i=c.discountedPrice,l=c.id,u="$".concat(+(i*a).toFixed(2)),d="img/cart/minus-".concat(1===a?"disabled":"enabled",".svg");return Object(j.jsxs)("li",{className:"cart-item",children:[Object(j.jsx)("button",{type:"button",className:"cart-item__remove-button","data-cy":"cartDeleteButton",onClick:function(){return s(l)},children:Object(j.jsx)("img",{className:"cart-item__remove-icon",src:"img/cart/close.svg",alt:"Delete item"})}),Object(j.jsx)("img",{className:"cart-item__product-image",src:n,alt:"Product"}),Object(j.jsx)("p",{className:"cart-item__product-name",children:o}),Object(j.jsx)("button",{className:"cart-item__minus",type:"button",disabled:1===a,onClick:function(){return r(l,!0)},children:Object(j.jsx)("img",{className:"cart-item__minut-icon",src:d,alt:"Minus"})}),Object(j.jsx)("div",{"data-cy":"productQauntity",className:"cart-item__quantity",children:a}),Object(j.jsx)("button",{className:"cart-item__plus",type:"button",onClick:function(){return r(l,!1)},children:Object(j.jsx)("img",{className:"cart-item__plus-icon",src:"img/cart/plus.svg",alt:"Plus"})}),Object(j.jsx)("span",{className:"cart-item__total-price",children:u})]})},ge=function(e){var t=e.productsInCart,c=e.onRemoveClick,a=e.onQuantityClick;return Object(j.jsx)("ul",{className:"cart-items",children:t.map((function(e){var t=e.product.id;return Object(j.jsx)(_e,{productInCart:e,onRemoveClick:c,onQuantityClick:a},t)}))})},fe=function(){var e=J(z),t=Object(l.a)(e,4),c=t[0],a=t[1],s=t[3],r=Object(o.useState)(!1),n=Object(l.a)(r,2),i=n[0],u=n[1],d=c(),b=d.reduce((function(e,t){var c=t.quantity;return e+t.product.discountedPrice*c}),0),m="$".concat(+b.toFixed(2)),p=d.reduce((function(e,t){return e+t.quantity}),0),O="Total for ".concat(p," item").concat(1===p?"":"s"),x=0===s;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(T,{hasSearch:!1,hasNav:!1,hasFavorites:!1,cartCount:p}),Object(j.jsxs)("main",{className:"cart",children:[Object(j.jsx)(ve,{extraClass:"cart__back"}),x?Object(j.jsx)(A,{children:"Your cart is empty"}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(A,{extraClassName:"cart__title",children:"Cart"}),Object(j.jsxs)("div",{className:"cart__content",children:[Object(j.jsx)("div",{className:"cart__items",children:Object(j.jsx)(ge,{productsInCart:d,onRemoveClick:function(e){a(d.filter((function(t){return t.product.id!==e})))},onQuantityClick:function(e,t){a(d.map((function(c){var a=Object(E.a)({},c),s=c.product,r=c.quantity;return s.id===e&&(t?r>1&&(a.quantity-=1):a.quantity+=1),Object(E.a)({},a)})))}})}),Object(j.jsxs)("div",{className:"cart__summary-wrapper",children:[Object(j.jsxs)("div",{className:"cart__summary",children:[Object(j.jsx)(A,{extraClassName:"cart__total-price",children:m}),Object(j.jsx)("p",{className:"cart__count-text",children:O}),Object(j.jsx)("button",{type:"button",className:"cart__checkout-button",onClick:function(){u(!0)},children:Object(j.jsx)("div",{className:"cart__checkout-button-text",children:"Checkout"})})]}),i&&Object(j.jsx)("p",{children:"We are sorry, but this feature is not implemented yet"})]})]})]})]}),Object(j.jsx)(h,{hasTopNav:!1})]})},Ne=function(e){var t=e.imageSource,c=e.isSelected,a=d()("small-photo",{"small-photo--selected":c});return Object(j.jsx)("button",{type:"button",className:a,children:Object(j.jsx)("img",{className:"small-photo__picture",src:t,alt:"Small product"})})},ye=function(e){var t=e.children;return Object(j.jsx)("h2",{className:"subtitle",children:t})},Ce=function(){var e,t,c=Object(o.useState)(null),a=Object(l.a)(c,2),s=a[0],r=a[1],n=Object(o.useState)(null),u=Object(l.a)(n,2),d=u[0],b=u[1],m=Object(o.useState)(0),h=Object(l.a)(m,1)[0],v=Object(i.q)().productId,_=(null===s||void 0===s?void 0:s.type)||C.all,g=[{name:"Screen",value:W((null===s||void 0===s?void 0:s.screen)||"")},{name:"Resolution",value:(null===d||void 0===d?void 0:d.display.screenResolution)||""},{name:"Processor",value:(null===d||void 0===d?void 0:d.hardware.cpu)||""},{name:"RAM",value:G((null===s||void 0===s?void 0:s.ram)||"")}],f=[{name:"Screen",value:W((null===s||void 0===s?void 0:s.screen)||"")},{name:"Resolution",value:(null===d||void 0===d?void 0:d.display.screenResolution)||""},{name:"Processor",value:(null===d||void 0===d?void 0:d.hardware.cpu)||""},{name:"RAM",value:G((null===s||void 0===s?void 0:s.ram)||"")},{name:"Built in memory",value:G((null===d||void 0===d?void 0:d.storage.flash)||"")},{name:"Camera",value:(null===d||void 0===d?void 0:d.camera.primary)||""},{name:"Cell",value:(null===d||void 0===d?void 0:d.connectivity.cell)||""}],N="$".concat(null===s||void 0===s?void 0:s.discountedPrice);switch(_){case C.phone:e="Phones",t=p;break;case C.tablet:e="Tablets",t=O;break;case C.accessories:e="Accessories",t=x;break;default:e="",t=""}var y="ID: ".concat(function(e){switch(e){case"motorola-atrix-4g":return 802390;case"samsung-gem":return 802391;case"dell-venue":return 802392;case"nexus-s":return 802393;case"lg-axis":return 802394;case"samsung-showcase-a-galaxy-s-phone":return 802395;case"droid-2-global-by-motorola":return 802396;case"droid-pro-by-motorola":return 802397;case"motorola-bravo-with-motoblur":return 802398;case"motorola-defy-with-motoblur":case"t-mobile-mytouch-4g":return 802399;case"samsung-mesmerize-a-galaxy-s-phone":return 802400;case"sanyo-zio":return 802401;case"samsung-transform":return 802402;case"t-mobile-g2":return 802403;case"motorola-charm-with-motoblur":return 802404;case"motorola-xoom-with-wi-fi":return 802405;case"motorola-xoom":return 802406;case"dell-streak-7":return 802407;case"samsung-galaxy-tab":return 802408;default:return 0}}(null===s||void 0===s?void 0:s.id)),k=[{text:e,link:t},{text:(null===s||void 0===s?void 0:s.name)||""}];return Object(o.useEffect)((function(){q().then((function(e){r(e.find((function(e){return e.id===v}))||null)})),function(e){if(!e)throw new Error("Product not found");var t="https://mate-academy.github.io/react_phone-catalog/api/products/".concat(e,".json");return fetch(t).then((function(e){return e.json()}))}(v).then(b)}),[]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(T,{hasSearch:!1,activeCategory:_}),Object(j.jsx)("main",{className:"product-details",children:null!==s&&null!==d?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(re,{path:k}),Object(j.jsx)(ve,{extraClass:"product-details__back"}),Object(j.jsx)(A,{extraClassName:"product-details__title",children:s.name}),Object(j.jsxs)("section",{className:"product-details__content-up",children:[Object(j.jsx)("ul",{className:"product-details__small-photos",children:d.images.map((function(e,t){var c=t===h;return Object(j.jsx)("li",{children:Object(j.jsx)(Ne,{isSelected:c,imageSource:e})},e)}))}),Object(j.jsx)("img",{className:"product-details__big-photo",src:d.images[h],alt:"Selected"}),Object(j.jsxs)("div",{className:"product-details__up-details",children:[Object(j.jsxs)("div",{className:"product-details__prices",children:[Object(j.jsx)(A,{children:N}),!!s.discount&&Object(j.jsx)(Q,{children:s.price})]}),Object(j.jsx)("div",{className:"product-details__buttons",children:Object(j.jsx)(U,{product:s,areBig:!0})}),Object(j.jsx)("ul",{className:"product-details__up-specs",children:g.map((function(e){var t=e.name,c=e.value;if(c)return Object(j.jsx)(D,{name:t,value:c},t)}))})]}),Object(j.jsx)("p",{className:"product-details__id",children:y})]}),Object(j.jsxs)("section",{className:"product-details__content-down",children:[Object(j.jsxs)("div",{className:"product-details__content-down-left",children:[Object(j.jsx)(ye,{children:"About"}),Object(j.jsx)("article",{className:"product-details__description","data-cy":"productDescription",children:d.description})]}),Object(j.jsxs)("div",{className:"product-details__content-down-right",children:[Object(j.jsx)(ye,{children:"Tech-specs"}),Object(j.jsx)("ul",{className:"product-details__up-specs",children:f.map((function(e){var t=e.name,c=e.value;if(c)return Object(j.jsx)(D,{name:t,value:c,isBig:!0},t)}))})]})]})]}):Object(j.jsx)(ue,{})})]})},ke=function(){var e="".concat(g,"/:productId");return Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)(i.c,{children:[Object(j.jsx)(i.a,{path:"/",element:Object(j.jsx)(ee,{})}),Object(j.jsx)(i.a,{path:p,element:Object(j.jsx)(he,{})}),Object(j.jsx)(i.a,{path:O,element:Object(j.jsx)(pe,{})}),Object(j.jsx)(i.a,{path:x,element:Object(j.jsx)(Oe,{})}),Object(j.jsx)(i.a,{path:v,element:Object(j.jsx)(xe,{})}),Object(j.jsx)(i.a,{path:_,element:Object(j.jsx)(fe,{})}),Object(j.jsx)(i.a,{path:e,element:Object(j.jsx)(Ce,{})})]})})};n.a.render(Object(j.jsx)(s.a,{children:Object(j.jsx)(o.StrictMode,{children:Object(j.jsx)(ke,{})})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.b0c55812.chunk.js.map